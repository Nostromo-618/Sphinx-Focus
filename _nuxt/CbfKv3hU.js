import{t as $e,b as ze,c as Ve,V as Ce,d as de,P as X,e as Be,f as Re,g as Ee,h as _e,i as le,j as ce,k as Q,l as De,m as we,n as Fe,o as Ae,p as W,q as Ne,r as Me,s as Oe,v as Ue,w as Le,x as je,u as Ke}from"./DgthIhJj.js";import{u as B,x as j,v as te,Q as q,R as m,O as G,a1 as _,X as z,F as se,ag as Se,U as R,D as U,I as e,C as Pe,a5 as Ge,a4 as He,k as Ye,y as fe,a as Je,P as We,l as Qe,B as Xe,d as I,z as me,W as T,af as k,T as qe,a7 as H,ad as pe,ab as S,ak as Ze,c as ne,A as et,a9 as ge,aa as tt,M as at,a6 as ve}from"./BYCU_vvQ.js";function nt(i){return B(()=>$e(i)?!!ze(i)?.closest("form"):!0)}var st=j({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(i){const n=i,{primitiveElement:r,currentElement:s}=Ve(),u=B(()=>n.checked??n.value);return te(u,(d,v)=>{if(!s.value)return;const a=s.value,o=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(o,"value").set;if(p&&d!==v){const g=new Event("input",{bubbles:!0}),V=new Event("change",{bubbles:!0});p.call(a,d),a.dispatchEvent(g),a.dispatchEvent(V)}}),(d,v)=>(m(),q(Ce,G({ref_key:"primitiveElement",ref:r},{...n,...d.$attrs},{as:"input"}),null,16))}}),ye=st,lt=j({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(i){const n=i,r=B(()=>typeof n.value=="object"&&Array.isArray(n.value)&&n.value.length===0&&n.required),s=B(()=>typeof n.value=="string"||typeof n.value=="number"||typeof n.value=="boolean"||n.value===null||n.value===void 0?[{name:n.name,value:n.value}]:typeof n.value=="object"&&Array.isArray(n.value)?n.value.flatMap((u,d)=>typeof u=="object"?Object.entries(u).map(([v,a])=>({name:`${n.name}[${d}][${v}]`,value:a})):{name:`${n.name}[${d}]`,value:u}):n.value!==null&&typeof n.value=="object"&&!Array.isArray(n.value)?Object.entries(n.value).map(([u,d])=>({name:`${n.name}[${u}]`,value:d})):[]);return(u,d)=>(m(),_(se,null,[z(" We render single input if it's required "),r.value?(m(),q(ye,G({key:u.name},{...n,...u.$attrs},{name:u.name,value:u.value}),null,16,["name","value"])):(m(!0),_(se,{key:1},Se(s.value,v=>(m(),q(ye,G({key:v.name},{ref_for:!0},{...n,...u.$attrs},{name:v.name,value:v.value}),null,16,["name","value"]))),128))],2112))}}),rt=lt,it=j({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(i){const n=i;return de(),(r,s)=>(m(),q(e(X),G(n,{onMousedown:s[0]||(s[0]=u=>{!u.defaultPrevented&&u.detail>1&&u.preventDefault()})}),{default:R(()=>[U(r.$slots,"default")]),_:3},16))}}),ot=it;const[ut,dt]=Re("SwitchRoot");var ct=j({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(i,{emit:n}){const r=i,s=n,{disabled:u}=Pe(r),d=Be(r,"modelValue",s,{defaultValue:r.defaultValue,passive:r.modelValue===void 0});function v(){u.value||(d.value=!d.value)}const{forwardRef:a,currentElement:o}=de(),f=nt(o),p=B(()=>r.id&&o.value?document.querySelector(`[for="${r.id}"]`)?.innerText:void 0);return dt({modelValue:d,toggleCheck:v,disabled:u}),(g,V)=>(m(),q(e(X),G(g.$attrs,{id:g.id,ref:e(a),role:"switch",type:g.as==="button"?"button":void 0,value:g.value,"aria-label":g.$attrs["aria-label"]||p.value,"aria-checked":e(d),"aria-required":g.required,"data-state":e(d)?"checked":"unchecked","data-disabled":e(u)?"":void 0,"as-child":g.asChild,as:g.as,disabled:e(u),onClick:v,onKeydown:Ge(He(v,["prevent"]),["enter"])}),{default:R(()=>[U(g.$slots,"default",{modelValue:e(d)}),e(f)&&g.name?(m(),q(e(rt),{key:0,type:"checkbox",name:g.name,disabled:e(u),required:g.required,value:g.value,checked:!!e(d)},null,8,["name","disabled","required","value","checked"])):z("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ft=ct,pt=j({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(i){const n=ut();return de(),(r,s)=>(m(),q(e(X),{"data-state":e(n).modelValue?.value?"checked":"unchecked","data-disabled":e(n).disabled.value?"":void 0,"as-child":r.asChild,as:r.as},{default:R(()=>[U(r.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),mt=pt;const gt=Symbol.for("nuxt:client-only"),vt=j({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(i,{slots:n,attrs:r}){const s=Ye(!1);fe(()=>{s.value=!0});const u=Je();return u&&(u._nuxtClientOnly=!0),Xe(gt,!0),()=>{if(s.value){const o=n.default?.();return o&&o.length===1?[We(o[0],r)]:o}const d=n.fallback||n.placeholder;if(d)return Qe(d);const v=i.fallback||i.placeholder||"",a=i.fallbackTag||i.placeholderTag||"span";return _(a,r,v)}}}),re=globalThis.setInterval,yt={class:"flex flex-col items-center justify-center p-6"},bt={key:0,class:"absolute top-2 left-2 right-2 p-3 rounded-lg bg-primary/10 border border-primary text-center text-sm font-medium text-primary animate-pulse"},ht={class:"relative mb-6"},kt={class:"transform -rotate-90",width:"200",height:"200"},xt=["stroke-dasharray","stroke-dashoffset"],_t={class:"absolute inset-0 flex flex-col items-center justify-center"},wt={class:"text-4xl font-bold text-highlighted mb-1"},St={class:"text-sm text-muted"},qt={class:"flex gap-2"},be="sphinx-focus-focus-duration",he="sphinx-focus-rest-duration",ke="sphinx-focus-blur-mode",ee="sphinx-focus-timer",It=j({__name:"FocusTimer",setup(i,{expose:n}){function r(){try{const l=localStorage.getItem(be),t=l?parseInt(l,10):25;return(isNaN(t)||t<1||t>99?25:t)*60}catch{return 1500}}function s(){try{const l=localStorage.getItem(he),t=l?parseInt(l,10):5;return(isNaN(t)||t<1||t>99?5:t)*60}catch{return 300}}function u(){try{const l=localStorage.getItem(ke);return l!==null?l==="true":!0}catch{return!0}}const d=I(r()),v=I(s()),a=I(u());{const l=()=>{const N=r(),ae=s(),Te=u();a.value=Te,f.value==="idle"&&(d.value=N,v.value=ae,o.value==="focus"?p.value=d.value:o.value==="rest"&&(p.value=v.value))},t=re(()=>{l()},500),x=N=>{(N.key===be||N.key===he||N.key===ke)&&l()};window.addEventListener("storage",x),me(()=>{clearInterval(t),window.removeEventListener("storage",x)})}const o=I("focus"),f=I("idle"),p=I(d.value),g=I(null),V=I(!1),O=Ee(),{isUnlocked:M}=_e();function b(){const l={mode:o.value,state:f.value,timeRemaining:p.value,lastUpdateTimestamp:Date.now()};try{localStorage.setItem(ee,JSON.stringify(l))}catch(t){console.error("Failed to save timer state:",t)}}function h(){try{const l=localStorage.getItem(ee);if(!l)return;const t=JSON.parse(l);if(!t||typeof t.mode!="string"||typeof t.state!="string"||typeof t.timeRemaining!="number"||typeof t.lastUpdateTimestamp!="number"){localStorage.removeItem(ee);return}if(o.value=t.mode,f.value=t.state,t.state==="running"){const x=Date.now(),N=Math.floor((x-t.lastUpdateTimestamp)/1e3),ae=t.timeRemaining-N;if(ae<=0){p.value=0,A();return}else p.value=ae,f.value="running",g.value=re(()=>{p.value>0?(p.value--,b()):A()},1e3)}else p.value=t.timeRemaining}catch(l){console.error("Failed to load timer state:",l),localStorage.removeItem(ee)}}te([o,f],()=>{b()},{immediate:!1}),te(M,(l,t)=>{t===!0&&!l&&(g.value&&(clearInterval(g.value),g.value=null),o.value="focus",f.value="idle",p.value=d.value,V.value=!1)}),fe(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),h()});function $(){try{const l=new(window.AudioContext||window.webkitAudioContext),t=l.createOscillator(),x=l.createGain();t.connect(x),x.connect(l.destination),t.frequency.value=800,t.type="sine",x.gain.setValueAtTime(.3,l.currentTime),x.gain.exponentialRampToValueAtTime(.01,l.currentTime+.5),t.start(l.currentTime),t.stop(l.currentTime+.5)}catch{}}function K(l){if("Notification"in window&&Notification.permission==="granted"){const t=l==="focus"?"Focus session complete!":"Break is over!",x=l==="focus"?"Time for a break.":"Ready to focus again?";new Notification(t,{body:x,icon:"/favicon.ico"})}}function C(l){const t=l==="focus"?"Focus session complete!":"Break is over!",x=l==="focus"?"Great work! Time for a well-deserved break.":"Ready to focus again?";O.add({title:t,description:x,icon:l==="focus"?"i-lucide-coffee":"i-lucide-zap",color:l==="focus"?"success":"primary"})}const E=B(()=>o.value==="focus"?d.value:v.value),D=B(()=>(E.value-p.value)/E.value*100),P=B(()=>2*Math.PI*90),J=B(()=>P.value-D.value/100*P.value),Y=B(()=>{const l=Math.floor(p.value/60),t=p.value%60;return`${String(l).padStart(2,"0")}:${String(t).padStart(2,"0")}`}),Z=B(()=>o.value==="focus"?"Focus":"Rest");function c(){if(f.value==="running"){y();return}f.value="running",b(),g.value=re(()=>{p.value>0?(p.value--,b()):A()},1e3)}function y(){g.value&&(clearInterval(g.value),g.value=null),f.value="paused",b()}function F(){y(),f.value="idle",p.value=E.value,localStorage.removeItem(ee)}function L(){y(),o.value==="focus"?(o.value="rest",p.value=v.value):(o.value="focus",p.value=d.value),f.value="idle",b()}function A(){const l=o.value;$(),K(l),C(l),V.value=!0,setTimeout(()=>{V.value=!1},3e3),L()}function w(){L()}return me(()=>{g.value&&clearInterval(g.value)}),n({mode:o,state:f,timeRemaining:p,formattedTime:Y,blurModeEnabled:a}),(l,t)=>{const x=vt,N=le;return m(),_("div",yt,[T(qe,{name:"fade"},{default:R(()=>[e(V)?(m(),_("div",bt," Session complete! ðŸŽ‰ ")):z("",!0)]),_:1}),k("div",ht,[(m(),_("svg",kt,[t[0]||(t[0]=k("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-border opacity-20"},null,-1)),k("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":e(P),"stroke-dashoffset":e(J),class:"text-primary transition-all duration-1000 ease-linear","stroke-linecap":"round"},null,8,xt)])),k("div",_t,[T(x,null,{fallback:R(()=>[...t[1]||(t[1]=[k("div",{class:"text-4xl font-bold text-highlighted mb-1"}," 25:00 ",-1)])]),default:R(()=>[k("div",wt,H(e(Y)),1)]),_:1}),k("div",St,H(e(Z)),1)])]),k("div",qt,[e(f)==="idle"?(m(),q(N,{key:0,label:"Start",icon:"i-lucide-play",color:"primary",onClick:c})):e(f)==="running"?(m(),q(N,{key:1,label:"Pause",icon:"i-lucide-pause",color:"warning",onClick:y})):e(f)==="paused"?(m(),q(N,{key:2,label:"Resume",icon:"i-lucide-play",color:"primary",onClick:c})):z("",!0),T(N,{label:"Skip",icon:"i-lucide-skip-forward",color:"neutral",variant:"outline",onClick:w}),T(N,{label:"Reset",icon:"i-lucide-rotate-ccw",color:"neutral",variant:"outline",disabled:e(f)==="idle"&&e(p)===e(E),onClick:F},null,8,["disabled"])])])}}}),Tt=Object.assign(It,{__name:"FocusTimer"}),$t={slots:{root:"rounded-lg overflow-hidden",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},zt={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(i){const n=i,r=pe(),s=ce(),u=B(()=>Q({extend:Q($t),...s.ui?.card||{}})({variant:n.variant}));return(d,v)=>(m(),q(e(X),{as:i.as,"data-slot":"root",class:S(u.value.root({class:[n.ui?.root,n.class]}))},{default:R(()=>[r.header?(m(),_("div",{key:0,"data-slot":"header",class:S(u.value.header({class:n.ui?.header}))},[U(d.$slots,"header")],2)):z("",!0),r.default?(m(),_("div",{key:1,"data-slot":"body",class:S(u.value.body({class:n.ui?.body}))},[U(d.$slots,"default")],2)):z("",!0),r.footer?(m(),_("div",{key:2,"data-slot":"footer",class:S(u.value.footer({class:n.ui?.footer}))},[U(d.$slots,"footer")],2)):z("",!0)]),_:3},8,["as","class"]))}},Vt={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ct=["id","type","value","name","placeholder","disabled","required","autocomplete"],Ie=Object.assign({inheritAttrs:!1},{__name:"UInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(i,{expose:n,emit:r}){const s=i,u=r,d=pe(),v=De(s,"modelValue",u,{defaultValue:s.defaultValue}),a=ce(),{emitFormBlur:o,emitFormInput:f,emitFormChange:p,size:g,color:V,id:O,name:M,highlight:b,disabled:h,emitFormFocus:$,ariaAttrs:K}=we(s,{deferInputValidation:!0}),{orientation:C,size:E}=Fe(s),{isLeading:D,isTrailing:P,leadingIconName:J,trailingIconName:Y}=Ae(s),Z=B(()=>E.value||g.value),c=B(()=>Q({extend:Q(Vt),...a.ui?.input||{}})({type:s.type,color:V.value,variant:s.variant,size:Z?.value,loading:s.loading,highlight:b.value,leading:D.value||!!s.avatar||!!d.leading,trailing:P.value||!!d.trailing,fieldGroup:C.value})),y=Ze("inputRef");function F(t){s.modelModifiers?.trim&&(t=t?.trim()??null),(s.modelModifiers?.number||s.type==="number")&&(t=Me(t)),s.modelModifiers?.nullable&&(t||=null),s.modelModifiers?.optional&&(t||=void 0),v.value=t,f()}function L(t){s.modelModifiers?.lazy||F(t.target.value)}function A(t){const x=t.target.value;s.modelModifiers?.lazy&&F(x),s.modelModifiers?.trim&&(t.target.value=x.trim()),p(),u("change",t)}function w(t){o(),u("blur",t)}function l(){s.autofocus&&y.value?.focus()}return fe(()=>{setTimeout(()=>{l()},s.autofocusDelay)}),n({inputRef:y}),(t,x)=>(m(),q(e(X),{as:i.as,"data-slot":"root",class:S(c.value.root({class:[s.ui?.root,s.class]}))},{default:R(()=>[k("input",G({id:e(O),ref_key:"inputRef",ref:y,type:i.type,value:e(v),name:e(M),placeholder:i.placeholder,"data-slot":"base",class:c.value.base({class:s.ui?.base}),disabled:e(h),required:i.required,autocomplete:i.autocomplete},{...t.$attrs,...e(K)},{onInput:L,onBlur:w,onChange:A,onFocus:x[0]||(x[0]=(...N)=>e($)&&e($)(...N))}),null,16,Ct),U(t.$slots,"default",{ui:c.value}),e(D)||i.avatar||d.leading?(m(),_("span",{key:0,"data-slot":"leading",class:S(c.value.leading({class:s.ui?.leading}))},[U(t.$slots,"leading",{ui:c.value},()=>[e(D)&&e(J)?(m(),q(W,{key:0,name:e(J),"data-slot":"leadingIcon",class:S(c.value.leadingIcon({class:s.ui?.leadingIcon}))},null,8,["name","class"])):i.avatar?(m(),q(Ne,G({key:1,size:s.ui?.leadingAvatarSize||c.value.leadingAvatarSize()},i.avatar,{"data-slot":"leadingAvatar",class:c.value.leadingAvatar({class:s.ui?.leadingAvatar})}),null,16,["size","class"])):z("",!0)])],2)):z("",!0),e(P)||d.trailing?(m(),_("span",{key:1,"data-slot":"trailing",class:S(c.value.trailing({class:s.ui?.trailing}))},[U(t.$slots,"trailing",{ui:c.value},()=>[e(Y)?(m(),q(W,{key:0,name:e(Y),"data-slot":"trailingIcon",class:S(c.value.trailingIcon({class:s.ui?.trailingIcon}))},null,8,["name","class"])):z("",!0)])],2)):z("",!0)]),_:3},8,["as","class"]))}}),Bt={class:"space-y-4"},Rt={class:"flex gap-2"},Et={key:0,class:"text-center py-8 text-muted"},Dt={key:1,class:"space-y-2"},Ft=["onDragstart","onDragover","onDrop"],At=["checked","onChange"],xe="sphinx-focus-tasks-encrypted",Nt=j({__name:"TaskList",setup(i,{expose:n}){const{encrypt:r,decrypt:s}=Oe(),{isUnlocked:u,hasSessionKey:d,getSessionKey:v}=_e(),a=I([]),o=I(""),f=I(null),p=I(null),g=I(!0);te(u,async c=>{c?await V():a.value=[]},{immediate:!0});async function V(){if(!d()){g.value=!1;return}g.value=!0;try{const c=localStorage.getItem(xe);if(c){const y=v(),F=await s(c,y);a.value=JSON.parse(F),C()}}catch{a.value=[]}finally{g.value=!1}}async function O(){if(d())try{const c=v(),y=await r(JSON.stringify(a.value),c);localStorage.setItem(xe,y)}catch(c){console.error("Failed to save tasks:",c)}}te(a,()=>{et(()=>O())},{deep:!0});function M(){return`task-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function b(){return a.value.length===0?0:Math.max(...a.value.map(c=>c.order))+1}function h(){o.value.trim()&&(a.value.push({id:M(),text:o.value.trim(),completed:!1,order:b()}),o.value="",C())}function $(c){const y=a.value.findIndex(F=>F.id===c);y!==-1&&(a.value.splice(y,1),C())}function K(c){const y=a.value.find(F=>F.id===c);y&&(y.completed=!y.completed,C())}function C(){a.value.sort((c,y)=>c.completed!==y.completed?c.completed?1:-1:c.order-y.order)}function E(c,y){f.value=y,c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("text/plain",y))}function D(c,y){c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),f.value!==y&&(p.value=y)}function P(){p.value=null}function J(c,y){if(c.preventDefault(),!f.value||f.value===y){f.value=null;return}const F=a.value.findIndex(A=>A.id===f.value),L=a.value.findIndex(A=>A.id===y);if(F!==-1&&L!==-1){const A=a.value[F],w=a.value[L];if(A&&w){const l=A.order,t=w.order;A.order=t,w.order=l,C()}}f.value=null,p.value=null}function Y(){f.value=null,p.value=null}function Z(c){c.key==="Enter"&&h()}return n({tasks:a}),(c,y)=>{const F=Ie,L=le,A=W;return m(),_("div",Bt,[k("div",Rt,[T(F,{modelValue:e(o),"onUpdate:modelValue":y[0]||(y[0]=w=>ne(o)?o.value=w:null),placeholder:"Add a new task...",class:"flex-1",onKeypress:Z},null,8,["modelValue"]),T(L,{label:"Add",icon:"i-lucide-plus",disabled:!e(o).trim(),color:"primary",onClick:h},null,8,["disabled"])]),e(a).length===0?(m(),_("div",Et,[...y[1]||(y[1]=[k("p",null,"No tasks yet. Add one above to get started!",-1)])])):(m(),_("div",Dt,[(m(!0),_(se,null,Se(e(a),w=>(m(),_("div",{key:w.id,draggable:!0,class:S(["flex items-center gap-3 p-3 rounded-lg border border-border bg-default hover:bg-elevated transition-colors cursor-move",{"opacity-50":e(f)===w.id,"ring-2 ring-primary":e(p)===w.id&&e(f)!==w.id}]),onDragstart:l=>E(l,w.id),onDragover:l=>D(l,w.id),onDragleave:P,onDrop:l=>J(l,w.id),onDragend:Y},[T(A,{name:"i-lucide-grip-vertical",class:"size-5 text-dimmed shrink-0"}),k("input",{type:"checkbox",checked:w.completed,class:"size-5 rounded border-border text-primary focus:ring-primary cursor-pointer",onChange:l=>K(w.id)},null,40,At),k("span",{class:S(["flex-1 text-default",{"line-through text-muted":w.completed}])},H(w.text),3),T(L,{icon:"i-lucide-trash-2",color:"error",variant:"ghost",size:"xs","aria-label":"Delete task",onClick:l=>$(w.id)},null,8,["onClick"])],42,Ft))),128))]))])}}}),Mt=Object.assign(Nt,{__name:"TaskList"}),Ot={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Ut=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:ge({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:ge(["change"],["update:modelValue"]),setup(i,{emit:n}){const r=i,s=pe(),u=n,d=tt(i,"modelValue",{type:Boolean,default:void 0}),v=ce(),a=Ue(Le(r,"required","value","defaultValue")),{id:o,emitFormChange:f,emitFormInput:p,size:g,color:V,name:O,disabled:M,ariaAttrs:b}=we(r),h=o.value??at(),$=B(()=>Q({extend:Q(Ot),...v.ui?.switch||{}})({size:g.value,color:V.value,required:r.required,loading:r.loading,disabled:M.value||r.loading}));function K(C){const E=new Event("change",{target:{value:C}});u("change",E),f(),p()}return(C,E)=>(m(),q(e(X),{as:i.as,"data-slot":"root",class:S($.value.root({class:[r.ui?.root,r.class]}))},{default:R(()=>[k("div",{"data-slot":"container",class:S($.value.container({class:r.ui?.container}))},[T(e(ft),G({id:e(h)},{...e(a),...C.$attrs,...e(b)},{modelValue:d.value,"onUpdate:modelValue":[E[0]||(E[0]=D=>d.value=D),K],name:e(O),disabled:e(M)||i.loading,"data-slot":"base",class:$.value.base({class:r.ui?.base})}),{default:R(()=>[T(e(mt),{"data-slot":"thumb",class:S($.value.thumb({class:r.ui?.thumb}))},{default:R(()=>[i.loading?(m(),q(W,{key:0,name:i.loadingIcon||e(v).ui.icons.loading,"data-slot":"icon",class:S($.value.icon({class:r.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(m(),_(se,{key:1},[i.checkedIcon?(m(),q(W,{key:0,name:i.checkedIcon,"data-slot":"icon",class:S($.value.icon({class:r.ui?.icon,checked:!0}))},null,8,["name","class"])):z("",!0),i.uncheckedIcon?(m(),q(W,{key:1,name:i.uncheckedIcon,"data-slot":"icon",class:S($.value.icon({class:r.ui?.icon,unchecked:!0}))},null,8,["name","class"])):z("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),i.label||s.label||i.description||s.description?(m(),_("div",{key:0,"data-slot":"wrapper",class:S($.value.wrapper({class:r.ui?.wrapper}))},[i.label||s.label?(m(),q(e(ot),{key:0,for:e(h),"data-slot":"label",class:S($.value.label({class:r.ui?.label}))},{default:R(()=>[U(C.$slots,"label",{label:i.label},()=>[ve(H(i.label),1)])]),_:3},8,["for","class"])):z("",!0),i.description||s.description?(m(),_("p",{key:1,"data-slot":"description",class:S($.value.description({class:r.ui?.description}))},[U(C.$slots,"description",{description:i.description},()=>[ve(H(i.description),1)])],2)):z("",!0)],2)):z("",!0)]),_:3},8,["as","class"]))}}),Lt={class:"space-y-6"},jt={class:"space-y-2"},Kt={key:0,class:"text-xs text-error"},Pt={class:"space-y-2"},Gt={key:0,class:"text-xs text-error"},Ht={class:"flex items-center justify-between p-4 rounded-lg border border-border bg-default"},Yt={class:"flex gap-3 pt-2"},ie="sphinx-focus-focus-duration",oe="sphinx-focus-rest-duration",ue="sphinx-focus-blur-mode",Jt=j({__name:"TimerSettingsModal",emits:["close"],setup(i,{emit:n}){const r=n;function s(){try{const b=localStorage.getItem(ie),h=b?parseInt(b,10):25;return isNaN(h)||h<1||h>99?25:h}catch{return 25}}function u(){try{const b=localStorage.getItem(oe),h=b?parseInt(b,10):5;return isNaN(h)||h<1||h>99?5:h}catch{return 5}}function d(){try{const b=localStorage.getItem(ue);return b!==null?b==="true":!0}catch{return!0}}const v=I(s()),a=I(u()),o=I(d()),f=I(""),p=I("");function g(){const b=v.value;return isNaN(b)||b<1||b>99?(f.value="Focus duration must be between 1 and 99 minutes",!1):(f.value="",!0)}function V(){const b=a.value;return isNaN(b)||b<1||b>99?(p.value="Rest duration must be between 1 and 99 minutes",!1):(p.value="",!0)}function O(){if(!(!g()||!V()))try{localStorage.setItem(ie,v.value.toString()),localStorage.setItem(oe,a.value.toString()),localStorage.setItem(ue,o.value.toString()),window.dispatchEvent(new StorageEvent("storage",{key:ie,newValue:v.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:oe,newValue:a.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:ue,newValue:o.value.toString()})),r("close")}catch(b){console.error("Failed to save settings:",b)}}function M(){r("close")}return(b,h)=>{const $=Ie,K=Ut,C=le,E=je;return m(),q(E,{open:!0,title:"Timer Settings",description:"Configure your focus and rest durations",ui:{content:"sm:max-w-md z-[101]",overlay:"z-[100]"},onClose:M},{body:R(()=>[k("div",Lt,[k("div",jt,[h[3]||(h[3]=k("label",{for:"focus-duration",class:"text-sm font-medium text-default"}," Focus Duration (minutes) ",-1)),T($,{id:"focus-duration",modelValue:e(v),"onUpdate:modelValue":h[0]||(h[0]=D=>ne(v)?v.value=D:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"25",error:e(f),onBlur:g},null,8,["modelValue","error"]),e(f)?(m(),_("p",Kt,H(e(f)),1)):z("",!0)]),k("div",Pt,[h[4]||(h[4]=k("label",{for:"rest-duration",class:"text-sm font-medium text-default"}," Rest Duration (minutes) ",-1)),T($,{id:"rest-duration",modelValue:e(a),"onUpdate:modelValue":h[1]||(h[1]=D=>ne(a)?a.value=D:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"5",error:e(p),onBlur:V},null,8,["modelValue","error"]),e(p)?(m(),_("p",Gt,H(e(p)),1)):z("",!0)]),k("div",Ht,[h[5]||(h[5]=k("div",{class:"flex-1"},[k("label",{for:"blur-mode",class:"text-sm font-medium text-default block mb-1"}," Blur Mode "),k("p",{class:"text-xs text-muted"}," Blur the task list during focus sessions to minimize distractions ")],-1)),T(K,{id:"blur-mode",modelValue:e(o),"onUpdate:modelValue":h[2]||(h[2]=D=>ne(o)?o.value=D:null),color:"primary"},null,8,["modelValue"])]),k("div",Yt,[T(C,{label:"Cancel",color:"neutral",variant:"outline",class:"flex-1",onClick:M}),T(C,{label:"Save",color:"primary",class:"flex-1",onClick:O})])])]),_:1})}}}),Wt=Object.assign(Jt,{__name:"TimerSettingsModal"}),Qt={class:"relative"},Xt={class:"container mx-auto px-4 py-6"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 relative"},ea={class:"flex items-center justify-between w-full"},ta={key:0,class:"fixed inset-0 bg-background/60 backdrop-blur-sm z-50 pointer-events-none"},sa=j({__name:"index",setup(i){const n=I(null),r=I(null),s=I(!1),u=B(()=>{const a=n.value,o=r.value?.tasks||[];if(!a)return"Focus Timer";if(a.mode==="rest"&&(a.state==="running"||a.state==="paused"))return"Rest";if(a.mode==="focus"&&(a.state==="running"||a.state==="paused")){const f=o.find(p=>!p.completed);return f?f.text:"Focus Timer"}return"Focus Timer"}),d=B(()=>{const a=n.value;return a&&(a.state==="running"||a.state==="paused")?`${a.mode==="focus"?"FOCUS":"REST"} - ${a.formattedTime}`:"Sphinx Focus"});Ke({title:d});const v=B(()=>{const a=n.value;return a?a.mode==="focus"&&a.state==="running"&&a.blurModeEnabled:!1});return(a,o)=>{const f=le,p=Tt,g=zt,V=Mt,O=Wt;return m(),_("div",Qt,[k("div",Xt,[k("div",Zt,[T(g,{class:"relative z-[60] transition-all duration-300"},{header:R(()=>[k("div",ea,[k("h3",{class:S(["text-lg font-semibold transition-colors",{"text-primary":e(u)!=="Focus Timer"&&e(u)!=="Rest"}])},H(e(u)),3),T(f,{icon:"i-lucide-settings",color:"neutral",variant:"ghost",size:"sm","aria-label":"Timer Settings",onClick:o[0]||(o[0]=M=>s.value=!0)})])]),default:R(()=>[T(p,{ref_key:"focusTimerRef",ref:n},null,512)]),_:1}),T(g,{class:S(["relative z-10 transition-all duration-300",{"blur-md opacity-50":e(v)}])},{header:R(()=>[...o[2]||(o[2]=[k("h3",{class:"text-lg font-semibold"}," Task List ",-1)])]),default:R(()=>[T(V,{ref_key:"taskListRef",ref:r},null,512)]),_:1},8,["class"])])]),T(qe,{name:"fade"},{default:R(()=>[e(v)?(m(),_("div",ta)):z("",!0)]),_:1}),e(s)?(m(),q(O,{key:0,onClose:o[1]||(o[1]=M=>s.value=!1)})):z("",!0)])}}});export{sa as default};
