import{t as Be,b as Ae,c as Fe,V as Re,d as ge,P as ae,e as Ne,f as Me,g as Ue,h as $e,i as ie,j as ye,k as te,l as Oe,m as Ve,n as Le,o as je,p as ee,q as Ke,r as Pe,s as He,v as Ye,w as Ge,x as ze,u as Je}from"./CJPNbJtg.js";import{u as E,x as L,v as oe,Q as S,R as v,O as J,a1 as I,X as $,F as ue,ag as Ce,U as C,D as O,I as t,C as We,a5 as Qe,a4 as Xe,k as Ze,y as ce,a as et,P as tt,l as at,B as nt,d as _,z as de,W as w,af as x,T as De,a7 as G,ad as he,ab as T,ak as st,c as le,A as lt,V as ot,a9 as xe,aa as it,M as rt,a6 as ke}from"./BYCU_vvQ.js";function ut(c){return E(()=>Be(c)?!!Ae(c)?.closest("form"):!0)}var dt=L({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(c){const s=c,{primitiveElement:i,currentElement:l}=Fe(),u=E(()=>s.checked??s.value);return oe(u,(d,g)=>{if(!l.value)return;const p=l.value,n=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(n,"value").set;if(o&&d!==g){const f=new Event("input",{bubbles:!0}),q=new Event("change",{bubbles:!0});o.call(p,d),p.dispatchEvent(f),p.dispatchEvent(q)}}),(d,g)=>(v(),S(Re,J({ref_key:"primitiveElement",ref:i},{...s,...d.$attrs},{as:"input"}),null,16))}}),_e=dt,ct=L({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(c){const s=c,i=E(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),l=E(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((u,d)=>typeof u=="object"?Object.entries(u).map(([g,p])=>({name:`${s.name}[${d}][${g}]`,value:p})):{name:`${s.name}[${d}]`,value:u}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([u,d])=>({name:`${s.name}[${u}]`,value:d})):[]);return(u,d)=>(v(),I(ue,null,[$(" We render single input if it's required "),i.value?(v(),S(_e,J({key:u.name},{...s,...u.$attrs},{name:u.name,value:u.value}),null,16,["name","value"])):(v(!0),I(ue,{key:1},Ce(l.value,g=>(v(),S(_e,J({key:g.name},{ref_for:!0},{...s,...u.$attrs},{name:g.name,value:g.value}),null,16,["name","value"]))),128))],2112))}}),ft=ct,pt=L({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(c){const s=c;return ge(),(i,l)=>(v(),S(t(ae),J(s,{onMousedown:l[0]||(l[0]=u=>{!u.defaultPrevented&&u.detail>1&&u.preventDefault()})}),{default:C(()=>[O(i.$slots,"default")]),_:3},16))}}),mt=pt;const[vt,gt]=Me("SwitchRoot");var yt=L({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(c,{emit:s}){const i=c,l=s,{disabled:u}=We(i),d=Ne(i,"modelValue",l,{defaultValue:i.defaultValue,passive:i.modelValue===void 0});function g(){u.value||(d.value=!d.value)}const{forwardRef:p,currentElement:n}=ge(),r=ut(n),o=E(()=>i.id&&n.value?document.querySelector(`[for="${i.id}"]`)?.innerText:void 0);return gt({modelValue:d,toggleCheck:g,disabled:u}),(f,q)=>(v(),S(t(ae),J(f.$attrs,{id:f.id,ref:t(p),role:"switch",type:f.as==="button"?"button":void 0,value:f.value,"aria-label":f.$attrs["aria-label"]||o.value,"aria-checked":t(d),"aria-required":f.required,"data-state":t(d)?"checked":"unchecked","data-disabled":t(u)?"":void 0,"as-child":f.asChild,as:f.as,disabled:t(u),onClick:g,onKeydown:Qe(Xe(g,["prevent"]),["enter"])}),{default:C(()=>[O(f.$slots,"default",{modelValue:t(d)}),t(r)&&f.name?(v(),S(t(ft),{key:0,type:"checkbox",name:f.name,disabled:t(u),required:f.required,value:f.value,checked:!!t(d)},null,8,["name","disabled","required","value","checked"])):$("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ht=yt,bt=L({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(c){const s=vt();return ge(),(i,l)=>(v(),S(t(ae),{"data-state":t(s).modelValue?.value?"checked":"unchecked","data-disabled":t(s).disabled.value?"":void 0,"as-child":i.asChild,as:i.as},{default:C(()=>[O(i.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),xt=bt;const kt=Symbol.for("nuxt:client-only"),_t=L({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(c,{slots:s,attrs:i}){const l=Ze(!1);ce(()=>{l.value=!0});const u=et();return u&&(u._nuxtClientOnly=!0),nt(kt,!0),()=>{if(l.value){const n=s.default?.();return n&&n.length===1?[tt(n[0],i)]:n}const d=s.fallback||s.placeholder;if(d)return at(d);const g=c.fallback||c.placeholder||"",p=c.fallbackTag||c.placeholderTag||"span";return I(p,i,g)}}}),re=globalThis.setInterval,wt={class:"flex flex-col items-center justify-center p-6"},St={key:0,class:"absolute top-2 left-2 right-2 p-3 rounded-lg bg-primary/10 border border-primary text-center text-sm font-medium text-primary animate-pulse"},It={class:"relative mb-6"},qt={class:"transform -rotate-90",width:"200",height:"200"},Tt=["stroke-dasharray","stroke-dashoffset"],$t={class:"absolute inset-0 flex flex-col items-center justify-center"},Vt={"data-testid":"timer-display",class:"text-4xl font-bold text-highlighted mb-1"},zt={"data-testid":"timer-mode",class:"text-sm text-muted"},Ct={class:"flex gap-2"},we="sphinx-focus-focus-duration",Se="sphinx-focus-rest-duration",Ie="sphinx-focus-blur-mode",se="sphinx-focus-timer",Dt=L({__name:"FocusTimer",setup(c,{expose:s}){function i(){try{const m=localStorage.getItem(we),e=m?parseInt(m,10):25;return(isNaN(e)||e<1||e>99?25:e)*60}catch{return 1500}}function l(){try{const m=localStorage.getItem(Se),e=m?parseInt(m,10):5;return(isNaN(e)||e<1||e>99?5:e)*60}catch{return 300}}function u(){try{const m=localStorage.getItem(Ie);return m!==null?m==="true":!0}catch{return!0}}const d=_(i()),g=_(l()),p=_(u());{const m=()=>{const b=i(),M=l(),z=u();p.value=z,r.value==="idle"&&(d.value=b,g.value=M,n.value==="focus"?o.value=d.value:n.value==="rest"&&(o.value=g.value))},e=re(()=>{m()},500),a=b=>{(b.key===we||b.key===Se||b.key===Ie)&&m()};window.addEventListener("storage",a),de(()=>{clearInterval(e),window.removeEventListener("storage",a)})}const n=_("focus"),r=_("idle"),o=_(d.value),f=_(null),q=_(!1),V=Ue(),{isUnlocked:F}=$e();function D(){const m={mode:n.value,state:r.value,timeRemaining:o.value,lastUpdateTimestamp:Date.now()};try{localStorage.setItem(se,JSON.stringify(m))}catch(e){console.error("Failed to save timer state:",e)}}function h(){try{const m=localStorage.getItem(se);if(!m)return;const e=JSON.parse(m);if(!e||typeof e.mode!="string"||typeof e.state!="string"||typeof e.timeRemaining!="number"||typeof e.lastUpdateTimestamp!="number"){localStorage.removeItem(se);return}if(n.value=e.mode,r.value=e.state,e.state==="running"){const a=Date.now(),b=Math.floor((a-e.lastUpdateTimestamp)/1e3),M=e.timeRemaining-b;if(M<=0){o.value=0,H();return}else o.value=M,r.value="running",f.value=re(()=>{o.value>0?(o.value--,D()):H()},1e3)}else o.value=e.timeRemaining}catch(m){console.error("Failed to load timer state:",m),localStorage.removeItem(se)}}oe([n,r],()=>{D()},{immediate:!1}),oe(F,(m,e)=>{e===!0&&!m&&(f.value&&(clearInterval(f.value),f.value=null),n.value="focus",r.value="idle",o.value=d.value,q.value=!1)}),ce(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),h()});function y(){try{const m=new(window.AudioContext||window.webkitAudioContext),e=m.createOscillator(),a=m.createGain();e.connect(a),a.connect(m.destination),e.frequency.value=800,e.type="sine",a.gain.setValueAtTime(.3,m.currentTime),a.gain.exponentialRampToValueAtTime(.01,m.currentTime+.5),e.start(m.currentTime),e.stop(m.currentTime+.5)}catch{}}function j(m){if("Notification"in window&&Notification.permission==="granted"){const e=m==="focus"?"Focus session complete!":"Break is over!",a=m==="focus"?"Time for a break.":"Ready to focus again?";new Notification(e,{body:a,icon:"/favicon.ico"})}}function N(m){const e=m==="focus"?"Focus session complete!":"Break is over!",a=m==="focus"?"Great work! Time for a well-deserved break.":"Ready to focus again?";V.add({title:e,description:a,icon:m==="focus"?"i-lucide-coffee":"i-lucide-zap",color:m==="focus"?"success":"primary"})}const B=E(()=>n.value==="focus"?d.value:g.value),U=E(()=>(B.value-o.value)/B.value*100),R=E(()=>2*Math.PI*90),K=E(()=>R.value-U.value/100*R.value),W=E(()=>{const m=Math.floor(o.value/60),e=o.value%60;return`${String(m).padStart(2,"0")}:${String(e).padStart(2,"0")}`}),ne=E(()=>n.value==="focus"?"Focus":"Rest");function A(){if(r.value==="running"){P();return}r.value="running",D(),f.value=re(()=>{o.value>0?(o.value--,D()):H()},1e3)}function P(){f.value&&(clearInterval(f.value),f.value=null),r.value="paused",D()}function X(){P(),r.value="idle",o.value=B.value,localStorage.removeItem(se)}function Z(){P(),n.value==="focus"?(n.value="rest",o.value=g.value):(n.value="focus",o.value=d.value),r.value="idle",D()}function H(){const m=n.value;y(),j(m),N(m),q.value=!0,setTimeout(()=>{q.value=!1},3e3),Z()}function Q(){Z()}return de(()=>{f.value&&clearInterval(f.value)}),s({mode:n,state:r,timeRemaining:o,formattedTime:W,blurModeEnabled:p}),(m,e)=>{const a=_t,b=ie;return v(),I("div",wt,[w(De,{name:"fade"},{default:C(()=>[t(q)?(v(),I("div",St," Session complete! ðŸŽ‰ ")):$("",!0)]),_:1}),x("div",It,[(v(),I("svg",qt,[e[0]||(e[0]=x("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-border opacity-20"},null,-1)),x("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":t(R),"stroke-dashoffset":t(K),class:"text-primary transition-all duration-1000 ease-linear","stroke-linecap":"round"},null,8,Tt)])),x("div",$t,[w(a,null,{fallback:C(()=>[...e[1]||(e[1]=[x("div",{class:"text-4xl font-bold text-highlighted mb-1"}," 25:00 ",-1)])]),default:C(()=>[x("div",Vt,G(t(W)),1)]),_:1}),x("div",zt,G(t(ne)),1)])]),x("div",Ct,[t(r)==="idle"?(v(),S(b,{key:0,"data-testid":"timer-start",label:"Start",icon:"i-lucide-play",color:"primary",onClick:A})):t(r)==="running"?(v(),S(b,{key:1,"data-testid":"timer-pause",label:"Pause",icon:"i-lucide-pause",color:"warning",onClick:P})):t(r)==="paused"?(v(),S(b,{key:2,"data-testid":"timer-resume",label:"Resume",icon:"i-lucide-play",color:"primary",onClick:A})):$("",!0),w(b,{"data-testid":"timer-skip",label:"Skip",icon:"i-lucide-skip-forward",color:"neutral",variant:"outline",onClick:Q}),w(b,{"data-testid":"timer-reset",label:"Reset",icon:"i-lucide-rotate-ccw",color:"neutral",variant:"outline",disabled:t(r)==="idle"&&t(o)===t(B),onClick:X},null,8,["disabled"])])])}}}),Et=Object.assign(Dt,{__name:"FocusTimer"}),Bt={slots:{root:"rounded-lg overflow-hidden",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},At={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(c){const s=c,i=he(),l=ye(),u=E(()=>te({extend:te(Bt),...l.ui?.card||{}})({variant:s.variant}));return(d,g)=>(v(),S(t(ae),{as:c.as,"data-slot":"root",class:T(u.value.root({class:[s.ui?.root,s.class]}))},{default:C(()=>[i.header?(v(),I("div",{key:0,"data-slot":"header",class:T(u.value.header({class:s.ui?.header}))},[O(d.$slots,"header")],2)):$("",!0),i.default?(v(),I("div",{key:1,"data-slot":"body",class:T(u.value.body({class:s.ui?.body}))},[O(d.$slots,"default")],2)):$("",!0),i.footer?(v(),I("div",{key:2,"data-slot":"footer",class:T(u.value.footer({class:s.ui?.footer}))},[O(d.$slots,"footer")],2)):$("",!0)]),_:3},8,["as","class"]))}},Ft={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Rt=["id","type","value","name","placeholder","disabled","required","autocomplete"],be=Object.assign({inheritAttrs:!1},{__name:"UInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(c,{expose:s,emit:i}){const l=c,u=i,d=he(),g=Oe(l,"modelValue",u,{defaultValue:l.defaultValue}),p=ye(),{emitFormBlur:n,emitFormInput:r,emitFormChange:o,size:f,color:q,id:V,name:F,highlight:D,disabled:h,emitFormFocus:y,ariaAttrs:j}=Ve(l,{deferInputValidation:!0}),{orientation:N,size:B}=Le(l),{isLeading:U,isTrailing:R,leadingIconName:K,trailingIconName:W}=je(l),ne=E(()=>B.value||f.value),A=E(()=>te({extend:te(Ft),...p.ui?.input||{}})({type:l.type,color:q.value,variant:l.variant,size:ne?.value,loading:l.loading,highlight:D.value,leading:U.value||!!l.avatar||!!d.leading,trailing:R.value||!!d.trailing,fieldGroup:N.value})),P=st("inputRef");function X(e){l.modelModifiers?.trim&&(e=e?.trim()??null),(l.modelModifiers?.number||l.type==="number")&&(e=Pe(e)),l.modelModifiers?.nullable&&(e||=null),l.modelModifiers?.optional&&(e||=void 0),g.value=e,r()}function Z(e){l.modelModifiers?.lazy||X(e.target.value)}function H(e){const a=e.target.value;l.modelModifiers?.lazy&&X(a),l.modelModifiers?.trim&&(e.target.value=a.trim()),o(),u("change",e)}function Q(e){n(),u("blur",e)}function m(){l.autofocus&&P.value?.focus()}return ce(()=>{setTimeout(()=>{m()},l.autofocusDelay)}),s({inputRef:P}),(e,a)=>(v(),S(t(ae),{as:c.as,"data-slot":"root",class:T(A.value.root({class:[l.ui?.root,l.class]}))},{default:C(()=>[x("input",J({id:t(V),ref_key:"inputRef",ref:P,type:c.type,value:t(g),name:t(F),placeholder:c.placeholder,"data-slot":"base",class:A.value.base({class:l.ui?.base}),disabled:t(h),required:c.required,autocomplete:c.autocomplete},{...e.$attrs,...t(j)},{onInput:Z,onBlur:Q,onChange:H,onFocus:a[0]||(a[0]=(...b)=>t(y)&&t(y)(...b))}),null,16,Rt),O(e.$slots,"default",{ui:A.value}),t(U)||c.avatar||d.leading?(v(),I("span",{key:0,"data-slot":"leading",class:T(A.value.leading({class:l.ui?.leading}))},[O(e.$slots,"leading",{ui:A.value},()=>[t(U)&&t(K)?(v(),S(ee,{key:0,name:t(K),"data-slot":"leadingIcon",class:T(A.value.leadingIcon({class:l.ui?.leadingIcon}))},null,8,["name","class"])):c.avatar?(v(),S(Ke,J({key:1,size:l.ui?.leadingAvatarSize||A.value.leadingAvatarSize()},c.avatar,{"data-slot":"leadingAvatar",class:A.value.leadingAvatar({class:l.ui?.leadingAvatar})}),null,16,["size","class"])):$("",!0)])],2)):$("",!0),t(R)||d.trailing?(v(),I("span",{key:1,"data-slot":"trailing",class:T(A.value.trailing({class:l.ui?.trailing}))},[O(e.$slots,"trailing",{ui:A.value},()=>[t(W)?(v(),S(ee,{key:0,name:t(W),"data-slot":"trailingIcon",class:T(A.value.trailingIcon({class:l.ui?.trailingIcon}))},null,8,["name","class"])):$("",!0)])],2)):$("",!0)]),_:3},8,["as","class"]))}}),Nt={class:"space-y-4"},Mt={class:"flex gap-2"},Ut={key:0,class:"text-center py-8 text-muted"},Ot={key:1,class:"space-y-2"},Lt=["data-testid","onDragstart","onDragover","onDrop"],jt=["data-testid","checked","onChange"],Kt=["data-testid"],qe="sphinx-focus-tasks-encrypted",Te="sphinx-focus-task-fade-duration",Pt=L({__name:"TaskList",setup(c,{expose:s}){const{encrypt:i,decrypt:l}=He(),{isUnlocked:u,hasSessionKey:d,getSessionKey:g}=$e(),p=_([]),n=_(""),r=_(null),o=_(null),f=_(!0),q=_(55),V=_({});function F(){try{const e=localStorage.getItem(Te),a=e?parseInt(e,10):55;return isNaN(a)||a<1||a>180?55:a}catch{return 55}}function D(){const e=a=>{if(a.key===Te&&a.newValue){const b=parseInt(a.newValue,10);!isNaN(b)&&b>=1&&b<=180&&(q.value=b)}};window.addEventListener("storage",e),de(()=>{window.removeEventListener("storage",e)})}q.value=F(),D(),oe(u,async e=>{e?await h():(p.value=[],V.value={})},{immediate:!0});async function h(){if(!d()){f.value=!1;return}f.value=!0;try{const e=localStorage.getItem(qe);if(e){const a=g(),b=await l(e,a),M=JSON.parse(b);p.value=M,M.forEach(z=>{z.completed&&!z.completedAt?(z.completedAt=Date.now(),V.value[z.id]=1):z.completed&&z.completedAt&&(V.value[z.id]=H(z))}),K(),Q()}}catch{p.value=[]}finally{f.value=!1}}async function y(){if(d())try{const e=g(),a=await i(JSON.stringify(p.value),e);localStorage.setItem(qe,a)}catch(e){console.error("Failed to save tasks:",e)}}oe(p,()=>{lt(()=>y())},{deep:!0});function j(){return`task-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function N(){return p.value.length===0?0:Math.max(...p.value.map(e=>e.order))+1}function B(){n.value.trim()&&(p.value.push({id:j(),text:n.value.trim(),completed:!1,order:N()}),n.value="",K())}function U(e){const a=p.value.findIndex(b=>b.id===e);a!==-1&&(p.value.splice(a,1),K())}function R(e){const a=p.value.find(b=>b.id===e);a&&(a.completed=!a.completed,a.completed?(a.completedAt=Date.now(),V.value[a.id]=1):(delete a.completedAt,delete V.value[a.id]),K())}function K(){p.value.sort((e,a)=>e.completed!==a.completed?e.completed?1:-1:e.order-a.order)}function W(e,a){r.value=a,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",a))}function ne(e,a){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),r.value!==a&&(o.value=a)}function A(){o.value=null}function P(e,a){if(e.preventDefault(),!r.value||r.value===a){r.value=null;return}const b=p.value.findIndex(z=>z.id===r.value),M=p.value.findIndex(z=>z.id===a);if(b!==-1&&M!==-1){const z=p.value[b],k=p.value[M];if(z&&k){const Y=z.order,Ee=k.order;z.order=Ee,k.order=Y,K()}}r.value=null,o.value=null}function X(){r.value=null,o.value=null}function Z(e){e.key==="Enter"&&B()}function H(e){if(!e.completed||!e.completedAt)return 1;const a=(Date.now()-e.completedAt)/1e3;return Math.max(0,Math.min(1,1-a/q.value))}function Q(){const e=[];p.value.forEach(a=>{if(a.completed&&a.completedAt){const b=H(a);V.value[a.id]=b,b<=0&&e.push(a.id)}}),e.forEach(a=>{U(a)})}let m=null;return ce(()=>{m=re(()=>{Q()},1e3),Q()}),de(()=>{m&&(clearInterval(m),m=null)}),s({tasks:p}),(e,a)=>{const b=be,M=ie,z=ee;return v(),I("div",Nt,[x("div",Mt,[w(b,{modelValue:t(n),"onUpdate:modelValue":a[0]||(a[0]=k=>le(n)?n.value=k:null),"data-testid":"task-input",placeholder:"Add a new task...",class:"flex-1",onKeypress:Z},null,8,["modelValue"]),w(M,{"data-testid":"task-add",label:"Add",icon:"i-lucide-plus",disabled:!t(n).trim(),color:"primary",onClick:B},null,8,["disabled"])]),t(p).length===0?(v(),I("div",Ut,[...a[1]||(a[1]=[x("p",null,"No tasks yet. Add one above to get started!",-1)])])):(v(),I("div",Ot,[(v(!0),I(ue,null,Ce(t(p),k=>(v(),I("div",{key:k.id,"data-testid":`task-item-${k.id}`,draggable:!0,class:T(["flex items-center gap-3 p-3 rounded-lg border border-border bg-default hover:bg-elevated transition-all cursor-move",{"opacity-50":t(r)===k.id,"ring-2 ring-primary":t(o)===k.id&&t(r)!==k.id}]),style:ot({opacity:k.completed&&k.completedAt?t(V)[k.id]??H(k):1,transition:"opacity 0.3s ease-in-out"}),onDragstart:Y=>W(Y,k.id),onDragover:Y=>ne(Y,k.id),onDragleave:A,onDrop:Y=>P(Y,k.id),onDragend:X},[w(z,{name:"i-lucide-grip-vertical",class:"size-5 text-dimmed shrink-0"}),x("input",{"data-testid":`task-checkbox-${k.id}`,type:"checkbox",checked:k.completed,class:"size-5 rounded border-border text-primary focus:ring-primary cursor-pointer",onChange:Y=>R(k.id)},null,40,jt),x("span",{"data-testid":`task-text-${k.id}`,class:T(["flex-1 text-default",{"line-through text-muted":k.completed}])},G(k.text),11,Kt),w(M,{"data-testid":`task-delete-${k.id}`,icon:"i-lucide-trash-2",color:"error",variant:"ghost",size:"xs","aria-label":"Delete task",onClick:Y=>U(k.id)},null,8,["data-testid","onClick"])],46,Lt))),128))]))])}}}),Ht=Object.assign(Pt,{__name:"TaskList"}),Yt={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Gt=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:xe({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:xe(["change"],["update:modelValue"]),setup(c,{emit:s}){const i=c,l=he(),u=s,d=it(c,"modelValue",{type:Boolean,default:void 0}),g=ye(),p=Ye(Ge(i,"required","value","defaultValue")),{id:n,emitFormChange:r,emitFormInput:o,size:f,color:q,name:V,disabled:F,ariaAttrs:D}=Ve(i),h=n.value??rt(),y=E(()=>te({extend:te(Yt),...g.ui?.switch||{}})({size:f.value,color:q.value,required:i.required,loading:i.loading,disabled:F.value||i.loading}));function j(N){const B=new Event("change",{target:{value:N}});u("change",B),r(),o()}return(N,B)=>(v(),S(t(ae),{as:c.as,"data-slot":"root",class:T(y.value.root({class:[i.ui?.root,i.class]}))},{default:C(()=>[x("div",{"data-slot":"container",class:T(y.value.container({class:i.ui?.container}))},[w(t(ht),J({id:t(h)},{...t(p),...N.$attrs,...t(D)},{modelValue:d.value,"onUpdate:modelValue":[B[0]||(B[0]=U=>d.value=U),j],name:t(V),disabled:t(F)||c.loading,"data-slot":"base",class:y.value.base({class:i.ui?.base})}),{default:C(()=>[w(t(xt),{"data-slot":"thumb",class:T(y.value.thumb({class:i.ui?.thumb}))},{default:C(()=>[c.loading?(v(),S(ee,{key:0,name:c.loadingIcon||t(g).ui.icons.loading,"data-slot":"icon",class:T(y.value.icon({class:i.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(v(),I(ue,{key:1},[c.checkedIcon?(v(),S(ee,{key:0,name:c.checkedIcon,"data-slot":"icon",class:T(y.value.icon({class:i.ui?.icon,checked:!0}))},null,8,["name","class"])):$("",!0),c.uncheckedIcon?(v(),S(ee,{key:1,name:c.uncheckedIcon,"data-slot":"icon",class:T(y.value.icon({class:i.ui?.icon,unchecked:!0}))},null,8,["name","class"])):$("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),c.label||l.label||c.description||l.description?(v(),I("div",{key:0,"data-slot":"wrapper",class:T(y.value.wrapper({class:i.ui?.wrapper}))},[c.label||l.label?(v(),S(t(mt),{key:0,for:t(h),"data-slot":"label",class:T(y.value.label({class:i.ui?.label}))},{default:C(()=>[O(N.$slots,"label",{label:c.label},()=>[ke(G(c.label),1)])]),_:3},8,["for","class"])):$("",!0),c.description||l.description?(v(),I("p",{key:1,"data-slot":"description",class:T(y.value.description({class:i.ui?.description}))},[O(N.$slots,"description",{description:c.description},()=>[ke(G(c.description),1)])],2)):$("",!0)],2)):$("",!0)]),_:3},8,["as","class"]))}}),Jt={class:"space-y-6"},Wt={class:"space-y-2"},Qt={key:0,class:"text-xs text-error"},Xt={class:"space-y-2"},Zt={key:0,class:"text-xs text-error"},ea={class:"flex items-center justify-between p-4 rounded-lg border border-border bg-default"},ta={class:"flex gap-3 pt-2"},fe="sphinx-focus-focus-duration",pe="sphinx-focus-rest-duration",me="sphinx-focus-blur-mode",aa=L({__name:"TimerSettingsModal",emits:["close"],setup(c,{emit:s}){const i=s;function l(){try{const h=localStorage.getItem(fe),y=h?parseInt(h,10):25;return isNaN(y)||y<1||y>99?25:y}catch{return 25}}function u(){try{const h=localStorage.getItem(pe),y=h?parseInt(h,10):5;return isNaN(y)||y<1||y>99?5:y}catch{return 5}}function d(){try{const h=localStorage.getItem(me);return h!==null?h==="true":!0}catch{return!0}}const g=_(l()),p=_(u()),n=_(d()),r=_(""),o=_("");function f(){const h=g.value;return isNaN(h)||h<1||h>99?(r.value="Focus duration must be between 1 and 99 minutes",!1):(r.value="",!0)}function q(){const h=p.value;return isNaN(h)||h<1||h>99?(o.value="Rest duration must be between 1 and 99 minutes",!1):(o.value="",!0)}function V(){if(!(!f()||!q()))try{localStorage.setItem(fe,g.value.toString()),localStorage.setItem(pe,p.value.toString()),localStorage.setItem(me,n.value.toString()),window.dispatchEvent(new StorageEvent("storage",{key:fe,newValue:g.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:pe,newValue:p.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:me,newValue:n.value.toString()})),i("close")}catch(h){console.error("Failed to save settings:",h)}}function F(h){(h===void 0||!h)&&i("close")}function D(){i("close")}return(h,y)=>{const j=be,N=Gt,B=ie,U=ze;return v(),S(U,{open:!0,title:"Timer Settings",description:"Configure your focus and rest durations",ui:{content:"sm:max-w-md z-[101]",overlay:"z-[100]"},"onUpdate:open":F},{body:C(()=>[x("div",Jt,[x("div",Wt,[y[3]||(y[3]=x("label",{for:"focus-duration",class:"text-sm font-medium text-default"}," Focus Duration (minutes) ",-1)),w(j,{id:"focus-duration",modelValue:t(g),"onUpdate:modelValue":y[0]||(y[0]=R=>le(g)?g.value=R:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"25",error:t(r),onBlur:f},null,8,["modelValue","error"]),t(r)?(v(),I("p",Qt,G(t(r)),1)):$("",!0)]),x("div",Xt,[y[4]||(y[4]=x("label",{for:"rest-duration",class:"text-sm font-medium text-default"}," Rest Duration (minutes) ",-1)),w(j,{id:"rest-duration",modelValue:t(p),"onUpdate:modelValue":y[1]||(y[1]=R=>le(p)?p.value=R:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"5",error:t(o),onBlur:q},null,8,["modelValue","error"]),t(o)?(v(),I("p",Zt,G(t(o)),1)):$("",!0)]),x("div",ea,[y[5]||(y[5]=x("div",{class:"flex-1"},[x("label",{for:"blur-mode",class:"text-sm font-medium text-default block mb-1"}," Blur Mode "),x("p",{class:"text-xs text-muted"}," Blur the task list during focus sessions to minimize distractions ")],-1)),w(N,{id:"blur-mode",modelValue:t(n),"onUpdate:modelValue":y[2]||(y[2]=R=>le(n)?n.value=R:null),color:"primary"},null,8,["modelValue"])]),x("div",ta,[w(B,{label:"Cancel",color:"neutral",variant:"outline",class:"flex-1",onClick:D}),w(B,{label:"Save",color:"primary",class:"flex-1",onClick:V})])])]),_:1})}}}),na=Object.assign(aa,{__name:"TimerSettingsModal"}),sa={class:"space-y-6"},la={class:"space-y-2"},oa={key:0,class:"text-xs text-error"},ia={class:"flex gap-3 pt-2"},ve="sphinx-focus-task-fade-duration",ra=L({__name:"TaskSettingsModal",emits:["close"],setup(c,{emit:s}){const i=s;function l(){try{const o=localStorage.getItem(ve),f=o?parseInt(o,10):55;return isNaN(f)||f<1||f>180?55:f}catch{return 55}}const u=_(l()),d=_("");function g(){const o=u.value;return isNaN(o)||o<1||o>180?(d.value="Fade duration must be between 1 and 180 seconds",!1):(d.value="",!0)}function p(){if(g())try{localStorage.setItem(ve,u.value.toString()),window.dispatchEvent(new StorageEvent("storage",{key:ve,newValue:u.value.toString()})),i("close")}catch(o){console.error("Failed to save settings:",o)}}function n(o){(o===void 0||!o)&&i("close")}function r(){i("close")}return(o,f)=>{const q=be,V=ie,F=ze;return v(),S(F,{open:!0,title:"Task Settings",description:"Configure how completed tasks fade away",ui:{content:"sm:max-w-md z-[101]",overlay:"z-[100]"},"onUpdate:open":n},{body:C(()=>[x("div",sa,[x("div",la,[f[1]||(f[1]=x("label",{for:"fade-duration",class:"text-sm font-medium text-default"}," Fade Duration (seconds) ",-1)),w(q,{id:"fade-duration",modelValue:t(u),"onUpdate:modelValue":f[0]||(f[0]=D=>le(u)?u.value=D:null),modelModifiers:{number:!0},type:"number",min:"1",max:"180",placeholder:"55",error:t(d),onBlur:g},null,8,["modelValue","error"]),t(d)?(v(),I("p",oa,G(t(d)),1)):$("",!0),f[2]||(f[2]=x("p",{class:"text-xs text-muted"}," How long completed tasks stay visible before fading away (1-180 seconds) ",-1))]),x("div",ia,[w(V,{label:"Cancel",color:"neutral",variant:"outline",class:"flex-1",onClick:r}),w(V,{label:"Save",color:"primary",class:"flex-1",onClick:p})])])]),_:1})}}}),ua=Object.assign(ra,{__name:"TaskSettingsModal"}),da={class:"relative"},ca={class:"container mx-auto px-4 py-6"},fa={class:"grid grid-cols-1 md:grid-cols-2 gap-4 relative"},pa={class:"flex items-center justify-between w-full"},ma={class:"flex items-center justify-between w-full"},va={key:0,class:"fixed inset-0 bg-background/60 backdrop-blur-sm z-50 pointer-events-none"},ha=L({__name:"index",setup(c){const s=_(null),i=_(null),l=_(!1),u=_(!1),d=E(()=>{const n=s.value,r=i.value?.tasks||[];if(!n)return"Focus Timer";if(n.mode==="rest"&&(n.state==="running"||n.state==="paused"))return"Rest";if(n.mode==="focus"&&(n.state==="running"||n.state==="paused")){const o=r.find(f=>!f.completed);return o?o.text:"Focus Timer"}return"Focus Timer"}),g=E(()=>{const n=s.value;return n&&(n.state==="running"||n.state==="paused")?`${n.mode==="focus"?"FOCUS":"REST"} - ${n.formattedTime}`:"Sphinx Focus"});Je({title:g});const p=E(()=>{const n=s.value;return n?n.mode==="focus"&&n.state==="running"&&n.blurModeEnabled:!1});return(n,r)=>{const o=ie,f=Et,q=At,V=Ht,F=na,D=ua;return v(),I("div",da,[x("div",ca,[x("div",fa,[w(q,{class:"relative z-[60] transition-all duration-300"},{header:C(()=>[x("div",pa,[x("h3",{class:T(["text-lg font-semibold transition-colors",{"text-primary":t(d)!=="Focus Timer"&&t(d)!=="Rest"}])},G(t(d)),3),w(o,{icon:"i-lucide-settings",color:"neutral",variant:"ghost",size:"sm","aria-label":"Timer Settings",onClick:r[0]||(r[0]=h=>l.value=!0)})])]),default:C(()=>[w(f,{ref_key:"focusTimerRef",ref:s},null,512)]),_:1}),w(q,{class:T(["relative z-10 transition-all duration-300",{"blur-md opacity-50":t(p)}])},{header:C(()=>[x("div",ma,[r[4]||(r[4]=x("h3",{class:"text-lg font-semibold"}," Task List ",-1)),w(o,{"data-testid":"task-settings-button",icon:"i-lucide-settings",color:"neutral",variant:"ghost",size:"sm","aria-label":"Task settings",onClick:r[1]||(r[1]=h=>u.value=!0)})])]),default:C(()=>[w(V,{ref_key:"taskListRef",ref:i},null,512)]),_:1},8,["class"])])]),w(De,{name:"fade"},{default:C(()=>[t(p)?(v(),I("div",va)):$("",!0)]),_:1}),t(l)?(v(),S(F,{key:0,onClose:r[2]||(r[2]=h=>l.value=!1)})):$("",!0),t(u)?(v(),S(D,{key:1,onClose:r[3]||(r[3]=h=>u.value=!1)})):$("",!0)])}}});export{ha as default};
