import{f as te,r as I,g as re,h as ie,i as A,j as ue,c as b,o as l,b as w,a as p,w as V,k as S,l as i,T as ce,t as Y,m as D,n as ae,p as ne,q as se,s as K,v as T,x as U,P as le,y as de,z as ge,A as fe,B as pe,C as ve,D as W,E as Q,F as me,G as ye,H as he,I as X,J as be,K as xe,L as _e,M as ke,N as Te,_ as ze}from"./Belu7k6G.js";const Ie=globalThis.setInterval,we={class:"flex flex-col items-center justify-center p-6"},Se={key:0,class:"absolute top-2 left-2 right-2 p-3 rounded-lg bg-primary/10 border border-primary text-center text-sm font-medium text-primary animate-pulse"},qe={class:"relative mb-6"},Ce={class:"transform -rotate-90",width:"200",height:"200"},$e=["stroke-dasharray","stroke-dashoffset"],Ae={class:"absolute inset-0 flex flex-col items-center justify-center"},De={class:"text-4xl font-bold text-highlighted mb-1"},Ne={class:"text-sm text-muted"},Be={class:"flex gap-2"},H=1500,Z=300,Fe=te({__name:"FocusTimer",setup(v){const o=I("focus"),r=I("idle"),e=I(H),u=I(null),m=I(!1),s=re();ie(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()});function x(){try{const n=new(window.AudioContext||window.webkitAudioContext),g=n.createOscillator(),f=n.createGain();g.connect(f),f.connect(n.destination),g.frequency.value=800,g.type="sine",f.gain.setValueAtTime(.3,n.currentTime),f.gain.exponentialRampToValueAtTime(.01,n.currentTime+.5),g.start(n.currentTime),g.stop(n.currentTime+.5)}catch{}}function y(n){if("Notification"in window&&Notification.permission==="granted"){const g=n==="focus"?"Focus session complete!":"Break is over!",f=n==="focus"?"Time for a break.":"Ready to focus again?";new Notification(g,{body:f,icon:"/favicon.ico"})}}function q(n){const g=n==="focus"?"Focus session complete!":"Break is over!",f=n==="focus"?"Great work! Time for a well-deserved break.":"Ready to focus again?";s.add({title:g,description:f,icon:n==="focus"?"i-lucide-coffee":"i-lucide-zap",color:n==="focus"?"success":"primary"})}const z=A(()=>o.value==="focus"?H:Z),L=A(()=>(z.value-e.value)/z.value*100),B=A(()=>2*Math.PI*90),E=A(()=>B.value-L.value/100*B.value),G=A(()=>{const n=Math.floor(e.value/60),g=e.value%60;return`${String(n).padStart(2,"0")}:${String(g).padStart(2,"0")}`}),O=A(()=>o.value==="focus"?"Focus":"Rest");function R(){if(r.value==="running"){C();return}r.value="running",u.value=Ie(()=>{e.value>0?e.value--:j()},1e3)}function C(){u.value&&(clearInterval(u.value),u.value=null),r.value="paused"}function $(){C(),r.value="idle",e.value=z.value}function M(){C(),o.value==="focus"?(o.value="rest",e.value=Z):(o.value="focus",e.value=H),r.value="idle"}function j(){const n=o.value;x(),y(n),q(n),m.value=!0,setTimeout(()=>{m.value=!1},3e3),M()}function F(){M()}return ue(()=>{u.value&&clearInterval(u.value)}),(n,g)=>{const f=ae;return l(),b("div",we,[w(ce,{name:"fade"},{default:V(()=>[i(m)?(l(),b("div",Se," Session complete! ðŸŽ‰ ")):S("",!0)]),_:1}),p("div",qe,[(l(),b("svg",Ce,[g[0]||(g[0]=p("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-border opacity-20"},null,-1)),p("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":i(B),"stroke-dashoffset":i(E),class:"text-primary transition-all duration-1000 ease-linear","stroke-linecap":"round"},null,8,$e)])),p("div",Ae,[p("div",De,Y(i(G)),1),p("div",Ne,Y(i(O)),1)])]),p("div",Be,[i(r)==="idle"?(l(),D(f,{key:0,label:"Start",icon:"i-lucide-play",color:"primary",onClick:R})):i(r)==="running"?(l(),D(f,{key:1,label:"Pause",icon:"i-lucide-pause",color:"warning",onClick:C})):i(r)==="paused"?(l(),D(f,{key:2,label:"Resume",icon:"i-lucide-play",color:"primary",onClick:R})):S("",!0),i(r)==="running"||i(r)==="paused"?(l(),D(f,{key:3,label:"Skip",icon:"i-lucide-skip-forward",color:"neutral",variant:"outline",onClick:F})):S("",!0),w(f,{label:"Reset",icon:"i-lucide-rotate-ccw",color:"neutral",variant:"outline",disabled:i(r)==="idle"&&i(e)===i(z),onClick:$},null,8,["disabled"])])])}}}),Ve=Object.assign(Fe,{__name:"FocusTimer"}),Oe={slots:{root:"rounded-lg overflow-hidden",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},Re={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(v){const o=v,r=ne(),e=se(),u=A(()=>K({extend:K(Oe),...e.ui?.card||{}})({variant:o.variant}));return(m,s)=>(l(),D(i(le),{as:v.as,"data-slot":"root",class:T(u.value.root({class:[o.ui?.root,o.class]}))},{default:V(()=>[r.header?(l(),b("div",{key:0,"data-slot":"header",class:T(u.value.header({class:o.ui?.header}))},[U(m.$slots,"header")],2)):S("",!0),r.default?(l(),b("div",{key:1,"data-slot":"body",class:T(u.value.body({class:o.ui?.body}))},[U(m.$slots,"default")],2)):S("",!0),r.footer?(l(),b("div",{key:2,"data-slot":"footer",class:T(u.value.footer({class:o.ui?.footer}))},[U(m.$slots,"footer")],2)):S("",!0)]),_:3},8,["as","class"]))}},Me={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ue=["id","type","value","name","placeholder","disabled","required","autocomplete"],Le=Object.assign({inheritAttrs:!1},{__name:"UInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(v,{expose:o,emit:r}){const e=v,u=r,m=ne(),s=de(e,"modelValue",u,{defaultValue:e.defaultValue}),x=se(),{emitFormBlur:y,emitFormInput:q,emitFormChange:z,size:L,color:B,id:E,name:G,highlight:O,disabled:R,emitFormFocus:C,ariaAttrs:$}=ge(e,{}),{orientation:M,size:j}=fe(e),{isLeading:F,isTrailing:n,leadingIconName:g,trailingIconName:f}=pe(e),a=A(()=>j.value||L.value),t=A(()=>K({extend:K(Me),...x.ui?.input||{}})({type:e.type,color:B.value,variant:e.variant,size:a?.value,loading:e.loading,highlight:O.value,leading:F.value||!!e.avatar||!!m.leading,trailing:n.value||!!m.trailing,fieldGroup:M.value})),h=ve("inputRef");function N(d){e.modelModifiers?.trim&&(d=d?.trim()??null),(e.modelModifiers?.number||e.type==="number")&&(d=ye(d)),e.modelModifiers?.nullable&&(d||=null),e.modelModifiers?.optional&&(d||=void 0),s.value=d,q()}function _(d){e.modelModifiers?.lazy||N(d.target.value)}function c(d){const P=d.target.value;e.modelModifiers?.lazy&&N(P),e.modelModifiers?.trim&&(d.target.value=P.trim()),z(),u("change",d)}function k(d){y(),u("blur",d)}function J(){e.autofocus&&h.value?.focus()}return ie(()=>{setTimeout(()=>{J()},e.autofocusDelay)}),o({inputRef:h}),(d,P)=>(l(),D(i(le),{as:v.as,"data-slot":"root",class:T(t.value.root({class:[e.ui?.root,e.class]}))},{default:V(()=>[p("input",W({id:i(E),ref_key:"inputRef",ref:h,type:v.type,value:i(s),name:i(G),placeholder:v.placeholder,"data-slot":"base",class:t.value.base({class:e.ui?.base}),disabled:i(R),required:v.required,autocomplete:v.autocomplete},{...d.$attrs,...i($)},{onInput:_,onBlur:k,onChange:c,onFocus:P[0]||(P[0]=(...oe)=>i(C)&&i(C)(...oe))}),null,16,Ue),U(d.$slots,"default",{ui:t.value}),i(F)||v.avatar||m.leading?(l(),b("span",{key:0,"data-slot":"leading",class:T(t.value.leading({class:e.ui?.leading}))},[U(d.$slots,"leading",{ui:t.value},()=>[i(F)&&i(g)?(l(),D(Q,{key:0,name:i(g),"data-slot":"leadingIcon",class:T(t.value.leadingIcon({class:e.ui?.leadingIcon}))},null,8,["name","class"])):v.avatar?(l(),D(me,W({key:1,size:e.ui?.leadingAvatarSize||t.value.leadingAvatarSize()},v.avatar,{"data-slot":"leadingAvatar",class:t.value.leadingAvatar({class:e.ui?.leadingAvatar})}),null,16,["size","class"])):S("",!0)])],2)):S("",!0),i(n)||m.trailing?(l(),b("span",{key:1,"data-slot":"trailing",class:T(t.value.trailing({class:e.ui?.trailing}))},[U(d.$slots,"trailing",{ui:t.value},()=>[i(f)?(l(),D(Q,{key:0,name:i(f),"data-slot":"trailingIcon",class:T(t.value.trailingIcon({class:e.ui?.trailingIcon}))},null,8,["name","class"])):S("",!0)])],2)):S("",!0)]),_:3},8,["as","class"]))}}),Ee={class:"space-y-4"},Ge={class:"flex gap-2"},je={key:0,class:"text-center py-8 text-muted"},Pe={key:1,class:"space-y-2"},Ke=["onDragstart","onDragover","onDrop"],Je=["checked","onChange"],ee="sphinx-focus-tasks-encrypted",He=te({__name:"TaskList",setup(v){const{encrypt:o,decrypt:r}=ke(),{isUnlocked:e,hasSessionKey:u,getSessionKey:m}=he(),s=I([]),x=I(""),y=I(null),q=I(null),z=I(!0);X(e,async a=>{a&&await L()},{immediate:!0});async function L(){if(!u()){z.value=!1;return}z.value=!0;try{const a=localStorage.getItem(ee);if(a){const t=m(),h=await r(a,t);s.value=JSON.parse(h),$()}}catch{s.value=[]}finally{z.value=!1}}async function B(){if(u())try{const a=m(),t=await o(JSON.stringify(s.value),a);localStorage.setItem(ee,t)}catch(a){console.error("Failed to save tasks:",a)}}X(s,()=>{Te(()=>B())},{deep:!0});function E(){return`task-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function G(){return s.value.length===0?0:Math.max(...s.value.map(a=>a.order))+1}function O(){x.value.trim()&&(s.value.push({id:E(),text:x.value.trim(),completed:!1,order:G()}),x.value="",$())}function R(a){const t=s.value.findIndex(h=>h.id===a);t!==-1&&(s.value.splice(t,1),$())}function C(a){const t=s.value.find(h=>h.id===a);t&&(t.completed=!t.completed,$())}function $(){s.value.sort((a,t)=>a.completed!==t.completed?a.completed?1:-1:a.order-t.order)}function M(a,t){y.value=t,a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",t))}function j(a,t){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),y.value!==t&&(q.value=t)}function F(){q.value=null}function n(a,t){if(a.preventDefault(),!y.value||y.value===t){y.value=null;return}const h=s.value.findIndex(_=>_.id===y.value),N=s.value.findIndex(_=>_.id===t);if(h!==-1&&N!==-1){const _=s.value[h],c=s.value[N];if(_&&c){const k=_.order,J=c.order;_.order=J,c.order=k,$()}}y.value=null,q.value=null}function g(){y.value=null,q.value=null}function f(a){a.key==="Enter"&&O()}return(a,t)=>{const h=Le,N=ae,_=Q;return l(),b("div",Ee,[p("div",Ge,[w(h,{modelValue:i(x),"onUpdate:modelValue":t[0]||(t[0]=c=>be(x)?x.value=c:null),placeholder:"Add a new task...",class:"flex-1",onKeypress:f},null,8,["modelValue"]),w(N,{label:"Add",icon:"i-lucide-plus",disabled:!i(x).trim(),color:"primary",onClick:O},null,8,["disabled"])]),i(s).length===0?(l(),b("div",je,[...t[1]||(t[1]=[p("p",null,"No tasks yet. Add one above to get started!",-1)])])):(l(),b("div",Pe,[(l(!0),b(xe,null,_e(i(s),c=>(l(),b("div",{key:c.id,draggable:!0,class:T(["flex items-center gap-3 p-3 rounded-lg border border-border bg-default hover:bg-elevated transition-colors cursor-move",{"opacity-50":i(y)===c.id,"ring-2 ring-primary":i(q)===c.id&&i(y)!==c.id}]),onDragstart:k=>M(k,c.id),onDragover:k=>j(k,c.id),onDragleave:F,onDrop:k=>n(k,c.id),onDragend:g},[w(_,{name:"i-lucide-grip-vertical",class:"size-5 text-dimmed shrink-0"}),p("input",{type:"checkbox",checked:c.completed,class:"size-5 rounded border-border text-primary focus:ring-primary cursor-pointer",onChange:k=>C(c.id)},null,40,Je),p("span",{class:T(["flex-1 text-default",{"line-through text-muted":c.completed}])},Y(c.text),3),w(N,{icon:"i-lucide-trash-2",color:"error",variant:"ghost",size:"xs","aria-label":"Delete task",onClick:k=>R(c.id)},null,8,["onClick"])],42,Ke))),128))]))])}}}),Ye=Object.assign(He,{__name:"TaskList"}),Qe={},We={class:"container mx-auto px-4 py-6"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"};function Ze(v,o){const r=Ve,e=Re,u=Ye;return l(),b("div",null,[p("div",We,[p("div",Xe,[w(e,null,{header:V(()=>[...o[0]||(o[0]=[p("h3",{class:"text-lg font-semibold"}," Focus Timer ",-1)])]),default:V(()=>[w(r)]),_:1}),w(e,null,{header:V(()=>[...o[1]||(o[1]=[p("h3",{class:"text-lg font-semibold"}," Task List ",-1)])]),default:V(()=>[w(u)]),_:1})])])])}const tt=ze(Qe,[["render",Ze]]);export{tt as default};
