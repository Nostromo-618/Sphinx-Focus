import{t as $e,b as ze,c as Ve,V as Ce,d as de,P as X,e as Be,f as Re,g as Ee,h as _e,i as le,j as ce,k as Q,l as De,m as we,n as Fe,o as Ae,p as W,q as Ne,r as Me,s as Oe,v as Ue,w as Le,x as je,u as Ke}from"./CIHTWDRr.js";import{u as V,x as P,v as te,Q as q,R as m,O as G,a1 as w,X as $,F as ne,ag as Se,U as C,D as L,I as e,C as Pe,a5 as Ge,a4 as He,k as Ye,y as fe,a as Je,P as We,l as Qe,B as Xe,d as I,z as me,W as T,af as k,T as qe,a7 as H,ad as pe,ab as S,ak as Ze,c as se,A as et,a9 as ge,aa as tt,M as at,a6 as ve}from"./BYCU_vvQ.js";function st(r){return V(()=>$e(r)?!!ze(r)?.closest("form"):!0)}var nt=P({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(r){const s=r,{primitiveElement:l,currentElement:n}=Ve(),u=V(()=>s.checked??s.value);return te(u,(d,h)=>{if(!n.value)return;const a=n.value,o=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(o,"value").set;if(p&&d!==h){const g=new Event("input",{bubbles:!0}),z=new Event("change",{bubbles:!0});p.call(a,d),a.dispatchEvent(g),a.dispatchEvent(z)}}),(d,h)=>(m(),q(Ce,G({ref_key:"primitiveElement",ref:l},{...s,...d.$attrs},{as:"input"}),null,16))}}),he=nt,lt=P({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(r){const s=r,l=V(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),n=V(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((u,d)=>typeof u=="object"?Object.entries(u).map(([h,a])=>({name:`${s.name}[${d}][${h}]`,value:a})):{name:`${s.name}[${d}]`,value:u}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([u,d])=>({name:`${s.name}[${u}]`,value:d})):[]);return(u,d)=>(m(),w(ne,null,[$(" We render single input if it's required "),l.value?(m(),q(he,G({key:u.name},{...s,...u.$attrs},{name:u.name,value:u.value}),null,16,["name","value"])):(m(!0),w(ne,{key:1},Se(n.value,h=>(m(),q(he,G({key:h.name},{ref_for:!0},{...s,...u.$attrs},{name:h.name,value:h.value}),null,16,["name","value"]))),128))],2112))}}),it=lt,rt=P({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(r){const s=r;return de(),(l,n)=>(m(),q(e(X),G(s,{onMousedown:n[0]||(n[0]=u=>{!u.defaultPrevented&&u.detail>1&&u.preventDefault()})}),{default:C(()=>[L(l.$slots,"default")]),_:3},16))}}),ot=rt;const[ut,dt]=Re("SwitchRoot");var ct=P({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(r,{emit:s}){const l=r,n=s,{disabled:u}=Pe(l),d=Be(l,"modelValue",n,{defaultValue:l.defaultValue,passive:l.modelValue===void 0});function h(){u.value||(d.value=!d.value)}const{forwardRef:a,currentElement:o}=de(),f=st(o),p=V(()=>l.id&&o.value?document.querySelector(`[for="${l.id}"]`)?.innerText:void 0);return dt({modelValue:d,toggleCheck:h,disabled:u}),(g,z)=>(m(),q(e(X),G(g.$attrs,{id:g.id,ref:e(a),role:"switch",type:g.as==="button"?"button":void 0,value:g.value,"aria-label":g.$attrs["aria-label"]||p.value,"aria-checked":e(d),"aria-required":g.required,"data-state":e(d)?"checked":"unchecked","data-disabled":e(u)?"":void 0,"as-child":g.asChild,as:g.as,disabled:e(u),onClick:h,onKeydown:Ge(He(h,["prevent"]),["enter"])}),{default:C(()=>[L(g.$slots,"default",{modelValue:e(d)}),e(f)&&g.name?(m(),q(e(it),{key:0,type:"checkbox",name:g.name,disabled:e(u),required:g.required,value:g.value,checked:!!e(d)},null,8,["name","disabled","required","value","checked"])):$("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ft=ct,pt=P({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(r){const s=ut();return de(),(l,n)=>(m(),q(e(X),{"data-state":e(s).modelValue?.value?"checked":"unchecked","data-disabled":e(s).disabled.value?"":void 0,"as-child":l.asChild,as:l.as},{default:C(()=>[L(l.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),mt=pt;const gt=Symbol.for("nuxt:client-only"),vt=P({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(r,{slots:s,attrs:l}){const n=Ye(!1);fe(()=>{n.value=!0});const u=Je();return u&&(u._nuxtClientOnly=!0),Xe(gt,!0),()=>{if(n.value){const o=s.default?.();return o&&o.length===1?[We(o[0],l)]:o}const d=s.fallback||s.placeholder;if(d)return Qe(d);const h=r.fallback||r.placeholder||"",a=r.fallbackTag||r.placeholderTag||"span";return w(a,l,h)}}}),ie=globalThis.setInterval,ht={class:"flex flex-col items-center justify-center p-6"},yt={key:0,class:"absolute top-2 left-2 right-2 p-3 rounded-lg bg-primary/10 border border-primary text-center text-sm font-medium text-primary animate-pulse"},bt={class:"relative mb-6"},kt={class:"transform -rotate-90",width:"200",height:"200"},xt=["stroke-dasharray","stroke-dashoffset"],_t={class:"absolute inset-0 flex flex-col items-center justify-center"},wt={"data-testid":"timer-display",class:"text-4xl font-bold text-highlighted mb-1"},St={"data-testid":"timer-mode",class:"text-sm text-muted"},qt={class:"flex gap-2"},ye="sphinx-focus-focus-duration",be="sphinx-focus-rest-duration",ke="sphinx-focus-blur-mode",ee="sphinx-focus-timer",It=P({__name:"FocusTimer",setup(r,{expose:s}){function l(){try{const i=localStorage.getItem(ye),t=i?parseInt(i,10):25;return(isNaN(t)||t<1||t>99?25:t)*60}catch{return 1500}}function n(){try{const i=localStorage.getItem(be),t=i?parseInt(i,10):5;return(isNaN(t)||t<1||t>99?5:t)*60}catch{return 300}}function u(){try{const i=localStorage.getItem(ke);return i!==null?i==="true":!0}catch{return!0}}const d=I(l()),h=I(n()),a=I(u());{const i=()=>{const F=l(),ae=n(),Te=u();a.value=Te,f.value==="idle"&&(d.value=F,h.value=ae,o.value==="focus"?p.value=d.value:o.value==="rest"&&(p.value=h.value))},t=ie(()=>{i()},500),_=F=>{(F.key===ye||F.key===be||F.key===ke)&&i()};window.addEventListener("storage",_),me(()=>{clearInterval(t),window.removeEventListener("storage",_)})}const o=I("focus"),f=I("idle"),p=I(d.value),g=I(null),z=I(!1),O=Ee(),{isUnlocked:M}=_e();function A(){const i={mode:o.value,state:f.value,timeRemaining:p.value,lastUpdateTimestamp:Date.now()};try{localStorage.setItem(ee,JSON.stringify(i))}catch(t){console.error("Failed to save timer state:",t)}}function b(){try{const i=localStorage.getItem(ee);if(!i)return;const t=JSON.parse(i);if(!t||typeof t.mode!="string"||typeof t.state!="string"||typeof t.timeRemaining!="number"||typeof t.lastUpdateTimestamp!="number"){localStorage.removeItem(ee);return}if(o.value=t.mode,f.value=t.state,t.state==="running"){const _=Date.now(),F=Math.floor((_-t.lastUpdateTimestamp)/1e3),ae=t.timeRemaining-F;if(ae<=0){p.value=0,D();return}else p.value=ae,f.value="running",g.value=ie(()=>{p.value>0?(p.value--,A()):D()},1e3)}else p.value=t.timeRemaining}catch(i){console.error("Failed to load timer state:",i),localStorage.removeItem(ee)}}te([o,f],()=>{A()},{immediate:!1}),te(M,(i,t)=>{t===!0&&!i&&(g.value&&(clearInterval(g.value),g.value=null),o.value="focus",f.value="idle",p.value=d.value,z.value=!1)}),fe(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),b()});function v(){try{const i=new(window.AudioContext||window.webkitAudioContext),t=i.createOscillator(),_=i.createGain();t.connect(_),_.connect(i.destination),t.frequency.value=800,t.type="sine",_.gain.setValueAtTime(.3,i.currentTime),_.gain.exponentialRampToValueAtTime(.01,i.currentTime+.5),t.start(i.currentTime),t.stop(i.currentTime+.5)}catch{}}function j(i){if("Notification"in window&&Notification.permission==="granted"){const t=i==="focus"?"Focus session complete!":"Break is over!",_=i==="focus"?"Time for a break.":"Ready to focus again?";new Notification(t,{body:_,icon:"/favicon.ico"})}}function B(i){const t=i==="focus"?"Focus session complete!":"Break is over!",_=i==="focus"?"Great work! Time for a well-deserved break.":"Ready to focus again?";O.add({title:t,description:_,icon:i==="focus"?"i-lucide-coffee":"i-lucide-zap",color:i==="focus"?"success":"primary"})}const R=V(()=>o.value==="focus"?d.value:h.value),U=V(()=>(R.value-p.value)/R.value*100),N=V(()=>2*Math.PI*90),J=V(()=>N.value-U.value/100*N.value),Y=V(()=>{const i=Math.floor(p.value/60),t=p.value%60;return`${String(i).padStart(2,"0")}:${String(t).padStart(2,"0")}`}),Z=V(()=>o.value==="focus"?"Focus":"Rest");function c(){if(f.value==="running"){y();return}f.value="running",A(),g.value=ie(()=>{p.value>0?(p.value--,A()):D()},1e3)}function y(){g.value&&(clearInterval(g.value),g.value=null),f.value="paused",A()}function E(){y(),f.value="idle",p.value=R.value,localStorage.removeItem(ee)}function K(){y(),o.value==="focus"?(o.value="rest",p.value=h.value):(o.value="focus",p.value=d.value),f.value="idle",A()}function D(){const i=o.value;v(),j(i),B(i),z.value=!0,setTimeout(()=>{z.value=!1},3e3),K()}function x(){K()}return me(()=>{g.value&&clearInterval(g.value)}),s({mode:o,state:f,timeRemaining:p,formattedTime:Y,blurModeEnabled:a}),(i,t)=>{const _=vt,F=le;return m(),w("div",ht,[T(qe,{name:"fade"},{default:C(()=>[e(z)?(m(),w("div",yt," Session complete! ðŸŽ‰ ")):$("",!0)]),_:1}),k("div",bt,[(m(),w("svg",kt,[t[0]||(t[0]=k("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8",class:"text-border opacity-20"},null,-1)),k("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":e(N),"stroke-dashoffset":e(J),class:"text-primary transition-all duration-1000 ease-linear","stroke-linecap":"round"},null,8,xt)])),k("div",_t,[T(_,null,{fallback:C(()=>[...t[1]||(t[1]=[k("div",{class:"text-4xl font-bold text-highlighted mb-1"}," 25:00 ",-1)])]),default:C(()=>[k("div",wt,H(e(Y)),1)]),_:1}),k("div",St,H(e(Z)),1)])]),k("div",qt,[e(f)==="idle"?(m(),q(F,{key:0,"data-testid":"timer-start",label:"Start",icon:"i-lucide-play",color:"primary",onClick:c})):e(f)==="running"?(m(),q(F,{key:1,"data-testid":"timer-pause",label:"Pause",icon:"i-lucide-pause",color:"warning",onClick:y})):e(f)==="paused"?(m(),q(F,{key:2,"data-testid":"timer-resume",label:"Resume",icon:"i-lucide-play",color:"primary",onClick:c})):$("",!0),T(F,{"data-testid":"timer-skip",label:"Skip",icon:"i-lucide-skip-forward",color:"neutral",variant:"outline",onClick:x}),T(F,{"data-testid":"timer-reset",label:"Reset",icon:"i-lucide-rotate-ccw",color:"neutral",variant:"outline",disabled:e(f)==="idle"&&e(p)===e(R),onClick:E},null,8,["disabled"])])])}}}),Tt=Object.assign(It,{__name:"FocusTimer"}),$t={slots:{root:"rounded-lg overflow-hidden",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},zt={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(r){const s=r,l=pe(),n=ce(),u=V(()=>Q({extend:Q($t),...n.ui?.card||{}})({variant:s.variant}));return(d,h)=>(m(),q(e(X),{as:r.as,"data-slot":"root",class:S(u.value.root({class:[s.ui?.root,s.class]}))},{default:C(()=>[l.header?(m(),w("div",{key:0,"data-slot":"header",class:S(u.value.header({class:s.ui?.header}))},[L(d.$slots,"header")],2)):$("",!0),l.default?(m(),w("div",{key:1,"data-slot":"body",class:S(u.value.body({class:s.ui?.body}))},[L(d.$slots,"default")],2)):$("",!0),l.footer?(m(),w("div",{key:2,"data-slot":"footer",class:S(u.value.footer({class:s.ui?.footer}))},[L(d.$slots,"footer")],2)):$("",!0)]),_:3},8,["as","class"]))}},Vt={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ct=["id","type","value","name","placeholder","disabled","required","autocomplete"],Ie=Object.assign({inheritAttrs:!1},{__name:"UInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(r,{expose:s,emit:l}){const n=r,u=l,d=pe(),h=De(n,"modelValue",u,{defaultValue:n.defaultValue}),a=ce(),{emitFormBlur:o,emitFormInput:f,emitFormChange:p,size:g,color:z,id:O,name:M,highlight:A,disabled:b,emitFormFocus:v,ariaAttrs:j}=we(n,{deferInputValidation:!0}),{orientation:B,size:R}=Fe(n),{isLeading:U,isTrailing:N,leadingIconName:J,trailingIconName:Y}=Ae(n),Z=V(()=>R.value||g.value),c=V(()=>Q({extend:Q(Vt),...a.ui?.input||{}})({type:n.type,color:z.value,variant:n.variant,size:Z?.value,loading:n.loading,highlight:A.value,leading:U.value||!!n.avatar||!!d.leading,trailing:N.value||!!d.trailing,fieldGroup:B.value})),y=Ze("inputRef");function E(t){n.modelModifiers?.trim&&(t=t?.trim()??null),(n.modelModifiers?.number||n.type==="number")&&(t=Me(t)),n.modelModifiers?.nullable&&(t||=null),n.modelModifiers?.optional&&(t||=void 0),h.value=t,f()}function K(t){n.modelModifiers?.lazy||E(t.target.value)}function D(t){const _=t.target.value;n.modelModifiers?.lazy&&E(_),n.modelModifiers?.trim&&(t.target.value=_.trim()),p(),u("change",t)}function x(t){o(),u("blur",t)}function i(){n.autofocus&&y.value?.focus()}return fe(()=>{setTimeout(()=>{i()},n.autofocusDelay)}),s({inputRef:y}),(t,_)=>(m(),q(e(X),{as:r.as,"data-slot":"root",class:S(c.value.root({class:[n.ui?.root,n.class]}))},{default:C(()=>[k("input",G({id:e(O),ref_key:"inputRef",ref:y,type:r.type,value:e(h),name:e(M),placeholder:r.placeholder,"data-slot":"base",class:c.value.base({class:n.ui?.base}),disabled:e(b),required:r.required,autocomplete:r.autocomplete},{...t.$attrs,...e(j)},{onInput:K,onBlur:x,onChange:D,onFocus:_[0]||(_[0]=(...F)=>e(v)&&e(v)(...F))}),null,16,Ct),L(t.$slots,"default",{ui:c.value}),e(U)||r.avatar||d.leading?(m(),w("span",{key:0,"data-slot":"leading",class:S(c.value.leading({class:n.ui?.leading}))},[L(t.$slots,"leading",{ui:c.value},()=>[e(U)&&e(J)?(m(),q(W,{key:0,name:e(J),"data-slot":"leadingIcon",class:S(c.value.leadingIcon({class:n.ui?.leadingIcon}))},null,8,["name","class"])):r.avatar?(m(),q(Ne,G({key:1,size:n.ui?.leadingAvatarSize||c.value.leadingAvatarSize()},r.avatar,{"data-slot":"leadingAvatar",class:c.value.leadingAvatar({class:n.ui?.leadingAvatar})}),null,16,["size","class"])):$("",!0)])],2)):$("",!0),e(N)||d.trailing?(m(),w("span",{key:1,"data-slot":"trailing",class:S(c.value.trailing({class:n.ui?.trailing}))},[L(t.$slots,"trailing",{ui:c.value},()=>[e(Y)?(m(),q(W,{key:0,name:e(Y),"data-slot":"trailingIcon",class:S(c.value.trailingIcon({class:n.ui?.trailingIcon}))},null,8,["name","class"])):$("",!0)])],2)):$("",!0)]),_:3},8,["as","class"]))}}),Bt={class:"space-y-4"},Rt={class:"flex gap-2"},Et={key:0,class:"text-center py-8 text-muted"},Dt={key:1,class:"space-y-2"},Ft=["data-testid","onDragstart","onDragover","onDrop"],At=["data-testid","checked","onChange"],Nt=["data-testid"],xe="sphinx-focus-tasks-encrypted",Mt=P({__name:"TaskList",setup(r,{expose:s}){const{encrypt:l,decrypt:n}=Oe(),{isUnlocked:u,hasSessionKey:d,getSessionKey:h}=_e(),a=I([]),o=I(""),f=I(null),p=I(null),g=I(!0);te(u,async c=>{c?await z():a.value=[]},{immediate:!0});async function z(){if(!d()){g.value=!1;return}g.value=!0;try{const c=localStorage.getItem(xe);if(c){const y=h(),E=await n(c,y);a.value=JSON.parse(E),B()}}catch{a.value=[]}finally{g.value=!1}}async function O(){if(d())try{const c=h(),y=await l(JSON.stringify(a.value),c);localStorage.setItem(xe,y)}catch(c){console.error("Failed to save tasks:",c)}}te(a,()=>{et(()=>O())},{deep:!0});function M(){return`task-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function A(){return a.value.length===0?0:Math.max(...a.value.map(c=>c.order))+1}function b(){o.value.trim()&&(a.value.push({id:M(),text:o.value.trim(),completed:!1,order:A()}),o.value="",B())}function v(c){const y=a.value.findIndex(E=>E.id===c);y!==-1&&(a.value.splice(y,1),B())}function j(c){const y=a.value.find(E=>E.id===c);y&&(y.completed=!y.completed,B())}function B(){a.value.sort((c,y)=>c.completed!==y.completed?c.completed?1:-1:c.order-y.order)}function R(c,y){f.value=y,c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("text/plain",y))}function U(c,y){c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),f.value!==y&&(p.value=y)}function N(){p.value=null}function J(c,y){if(c.preventDefault(),!f.value||f.value===y){f.value=null;return}const E=a.value.findIndex(D=>D.id===f.value),K=a.value.findIndex(D=>D.id===y);if(E!==-1&&K!==-1){const D=a.value[E],x=a.value[K];if(D&&x){const i=D.order,t=x.order;D.order=t,x.order=i,B()}}f.value=null,p.value=null}function Y(){f.value=null,p.value=null}function Z(c){c.key==="Enter"&&b()}return s({tasks:a}),(c,y)=>{const E=Ie,K=le,D=W;return m(),w("div",Bt,[k("div",Rt,[T(E,{modelValue:e(o),"onUpdate:modelValue":y[0]||(y[0]=x=>se(o)?o.value=x:null),"data-testid":"task-input",placeholder:"Add a new task...",class:"flex-1",onKeypress:Z},null,8,["modelValue"]),T(K,{"data-testid":"task-add",label:"Add",icon:"i-lucide-plus",disabled:!e(o).trim(),color:"primary",onClick:b},null,8,["disabled"])]),e(a).length===0?(m(),w("div",Et,[...y[1]||(y[1]=[k("p",null,"No tasks yet. Add one above to get started!",-1)])])):(m(),w("div",Dt,[(m(!0),w(ne,null,Se(e(a),x=>(m(),w("div",{key:x.id,"data-testid":`task-item-${x.id}`,draggable:!0,class:S(["flex items-center gap-3 p-3 rounded-lg border border-border bg-default hover:bg-elevated transition-colors cursor-move",{"opacity-50":e(f)===x.id,"ring-2 ring-primary":e(p)===x.id&&e(f)!==x.id}]),onDragstart:i=>R(i,x.id),onDragover:i=>U(i,x.id),onDragleave:N,onDrop:i=>J(i,x.id),onDragend:Y},[T(D,{name:"i-lucide-grip-vertical",class:"size-5 text-dimmed shrink-0"}),k("input",{"data-testid":`task-checkbox-${x.id}`,type:"checkbox",checked:x.completed,class:"size-5 rounded border-border text-primary focus:ring-primary cursor-pointer",onChange:i=>j(x.id)},null,40,At),k("span",{"data-testid":`task-text-${x.id}`,class:S(["flex-1 text-default",{"line-through text-muted":x.completed}])},H(x.text),11,Nt),T(K,{"data-testid":`task-delete-${x.id}`,icon:"i-lucide-trash-2",color:"error",variant:"ghost",size:"xs","aria-label":"Delete task",onClick:i=>v(x.id)},null,8,["data-testid","onClick"])],42,Ft))),128))]))])}}}),Ot=Object.assign(Mt,{__name:"TaskList"}),Ut={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Lt=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:ge({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:ge(["change"],["update:modelValue"]),setup(r,{emit:s}){const l=r,n=pe(),u=s,d=tt(r,"modelValue",{type:Boolean,default:void 0}),h=ce(),a=Ue(Le(l,"required","value","defaultValue")),{id:o,emitFormChange:f,emitFormInput:p,size:g,color:z,name:O,disabled:M,ariaAttrs:A}=we(l),b=o.value??at(),v=V(()=>Q({extend:Q(Ut),...h.ui?.switch||{}})({size:g.value,color:z.value,required:l.required,loading:l.loading,disabled:M.value||l.loading}));function j(B){const R=new Event("change",{target:{value:B}});u("change",R),f(),p()}return(B,R)=>(m(),q(e(X),{as:r.as,"data-slot":"root",class:S(v.value.root({class:[l.ui?.root,l.class]}))},{default:C(()=>[k("div",{"data-slot":"container",class:S(v.value.container({class:l.ui?.container}))},[T(e(ft),G({id:e(b)},{...e(a),...B.$attrs,...e(A)},{modelValue:d.value,"onUpdate:modelValue":[R[0]||(R[0]=U=>d.value=U),j],name:e(O),disabled:e(M)||r.loading,"data-slot":"base",class:v.value.base({class:l.ui?.base})}),{default:C(()=>[T(e(mt),{"data-slot":"thumb",class:S(v.value.thumb({class:l.ui?.thumb}))},{default:C(()=>[r.loading?(m(),q(W,{key:0,name:r.loadingIcon||e(h).ui.icons.loading,"data-slot":"icon",class:S(v.value.icon({class:l.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(m(),w(ne,{key:1},[r.checkedIcon?(m(),q(W,{key:0,name:r.checkedIcon,"data-slot":"icon",class:S(v.value.icon({class:l.ui?.icon,checked:!0}))},null,8,["name","class"])):$("",!0),r.uncheckedIcon?(m(),q(W,{key:1,name:r.uncheckedIcon,"data-slot":"icon",class:S(v.value.icon({class:l.ui?.icon,unchecked:!0}))},null,8,["name","class"])):$("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),r.label||n.label||r.description||n.description?(m(),w("div",{key:0,"data-slot":"wrapper",class:S(v.value.wrapper({class:l.ui?.wrapper}))},[r.label||n.label?(m(),q(e(ot),{key:0,for:e(b),"data-slot":"label",class:S(v.value.label({class:l.ui?.label}))},{default:C(()=>[L(B.$slots,"label",{label:r.label},()=>[ve(H(r.label),1)])]),_:3},8,["for","class"])):$("",!0),r.description||n.description?(m(),w("p",{key:1,"data-slot":"description",class:S(v.value.description({class:l.ui?.description}))},[L(B.$slots,"description",{description:r.description},()=>[ve(H(r.description),1)])],2)):$("",!0)],2)):$("",!0)]),_:3},8,["as","class"]))}}),jt={class:"space-y-6"},Kt={class:"space-y-2"},Pt={key:0,class:"text-xs text-error"},Gt={class:"space-y-2"},Ht={key:0,class:"text-xs text-error"},Yt={class:"flex items-center justify-between p-4 rounded-lg border border-border bg-default"},Jt={class:"flex gap-3 pt-2"},re="sphinx-focus-focus-duration",oe="sphinx-focus-rest-duration",ue="sphinx-focus-blur-mode",Wt=P({__name:"TimerSettingsModal",emits:["close"],setup(r,{emit:s}){const l=s;function n(){try{const b=localStorage.getItem(re),v=b?parseInt(b,10):25;return isNaN(v)||v<1||v>99?25:v}catch{return 25}}function u(){try{const b=localStorage.getItem(oe),v=b?parseInt(b,10):5;return isNaN(v)||v<1||v>99?5:v}catch{return 5}}function d(){try{const b=localStorage.getItem(ue);return b!==null?b==="true":!0}catch{return!0}}const h=I(n()),a=I(u()),o=I(d()),f=I(""),p=I("");function g(){const b=h.value;return isNaN(b)||b<1||b>99?(f.value="Focus duration must be between 1 and 99 minutes",!1):(f.value="",!0)}function z(){const b=a.value;return isNaN(b)||b<1||b>99?(p.value="Rest duration must be between 1 and 99 minutes",!1):(p.value="",!0)}function O(){if(!(!g()||!z()))try{localStorage.setItem(re,h.value.toString()),localStorage.setItem(oe,a.value.toString()),localStorage.setItem(ue,o.value.toString()),window.dispatchEvent(new StorageEvent("storage",{key:re,newValue:h.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:oe,newValue:a.value.toString()})),window.dispatchEvent(new StorageEvent("storage",{key:ue,newValue:o.value.toString()})),l("close")}catch(b){console.error("Failed to save settings:",b)}}function M(b){(b===void 0||!b)&&l("close")}function A(){l("close")}return(b,v)=>{const j=Ie,B=Lt,R=le,U=je;return m(),q(U,{open:!0,title:"Timer Settings",description:"Configure your focus and rest durations",ui:{content:"sm:max-w-md z-[101]",overlay:"z-[100]"},"onUpdate:open":M},{body:C(()=>[k("div",jt,[k("div",Kt,[v[3]||(v[3]=k("label",{for:"focus-duration",class:"text-sm font-medium text-default"}," Focus Duration (minutes) ",-1)),T(j,{id:"focus-duration",modelValue:e(h),"onUpdate:modelValue":v[0]||(v[0]=N=>se(h)?h.value=N:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"25",error:e(f),onBlur:g},null,8,["modelValue","error"]),e(f)?(m(),w("p",Pt,H(e(f)),1)):$("",!0)]),k("div",Gt,[v[4]||(v[4]=k("label",{for:"rest-duration",class:"text-sm font-medium text-default"}," Rest Duration (minutes) ",-1)),T(j,{id:"rest-duration",modelValue:e(a),"onUpdate:modelValue":v[1]||(v[1]=N=>se(a)?a.value=N:null),modelModifiers:{number:!0},type:"number",min:"1",max:"99",placeholder:"5",error:e(p),onBlur:z},null,8,["modelValue","error"]),e(p)?(m(),w("p",Ht,H(e(p)),1)):$("",!0)]),k("div",Yt,[v[5]||(v[5]=k("div",{class:"flex-1"},[k("label",{for:"blur-mode",class:"text-sm font-medium text-default block mb-1"}," Blur Mode "),k("p",{class:"text-xs text-muted"}," Blur the task list during focus sessions to minimize distractions ")],-1)),T(B,{id:"blur-mode",modelValue:e(o),"onUpdate:modelValue":v[2]||(v[2]=N=>se(o)?o.value=N:null),color:"primary"},null,8,["modelValue"])]),k("div",Jt,[T(R,{label:"Cancel",color:"neutral",variant:"outline",class:"flex-1",onClick:A}),T(R,{label:"Save",color:"primary",class:"flex-1",onClick:O})])])]),_:1})}}}),Qt=Object.assign(Wt,{__name:"TimerSettingsModal"}),Xt={class:"relative"},Zt={class:"container mx-auto px-4 py-6"},ea={class:"grid grid-cols-1 md:grid-cols-2 gap-4 relative"},ta={class:"flex items-center justify-between w-full"},aa={key:0,class:"fixed inset-0 bg-background/60 backdrop-blur-sm z-50 pointer-events-none"},la=P({__name:"index",setup(r){const s=I(null),l=I(null),n=I(!1),u=V(()=>{const a=s.value,o=l.value?.tasks||[];if(!a)return"Focus Timer";if(a.mode==="rest"&&(a.state==="running"||a.state==="paused"))return"Rest";if(a.mode==="focus"&&(a.state==="running"||a.state==="paused")){const f=o.find(p=>!p.completed);return f?f.text:"Focus Timer"}return"Focus Timer"}),d=V(()=>{const a=s.value;return a&&(a.state==="running"||a.state==="paused")?`${a.mode==="focus"?"FOCUS":"REST"} - ${a.formattedTime}`:"Sphinx Focus"});Ke({title:d});const h=V(()=>{const a=s.value;return a?a.mode==="focus"&&a.state==="running"&&a.blurModeEnabled:!1});return(a,o)=>{const f=le,p=Tt,g=zt,z=Ot,O=Qt;return m(),w("div",Xt,[k("div",Zt,[k("div",ea,[T(g,{class:"relative z-[60] transition-all duration-300"},{header:C(()=>[k("div",ta,[k("h3",{class:S(["text-lg font-semibold transition-colors",{"text-primary":e(u)!=="Focus Timer"&&e(u)!=="Rest"}])},H(e(u)),3),T(f,{icon:"i-lucide-settings",color:"neutral",variant:"ghost",size:"sm","aria-label":"Timer Settings",onClick:o[0]||(o[0]=M=>n.value=!0)})])]),default:C(()=>[T(p,{ref_key:"focusTimerRef",ref:s},null,512)]),_:1}),T(g,{class:S(["relative z-10 transition-all duration-300",{"blur-md opacity-50":e(h)}])},{header:C(()=>[...o[2]||(o[2]=[k("h3",{class:"text-lg font-semibold"}," Task List ",-1)])]),default:C(()=>[T(z,{ref_key:"taskListRef",ref:l},null,512)]),_:1},8,["class"])])]),T(qe,{name:"fade"},{default:C(()=>[e(h)?(m(),w("div",aa)):$("",!0)]),_:1}),e(n)?(m(),q(O,{key:0,onClose:o[1]||(o[1]=M=>n.value=!1)})):$("",!0)])}}});export{la as default};
